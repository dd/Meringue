{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"Meringue <p>A package providing various utilities for Django, such as mixins, form tools, upload handlers, and more.</p> <p>This library is a collection of reusable components that I frequently use across different projects. Its primary purpose is to clean up and standardize these tools, ensure they are well-tested, and provide clear documentation to make it easy for colleagues to understand and use.</p> <p>However, if someone decides to use this functionality in their project, and even more so to add functionality or change the implementation to a more correct, beautiful or understandable one, I will only be happy, do not worry and feel free to write to me by mail, create an issue or pull request on github.</p> <p>Read more in the documentation.</p>"},{"location":"#roadmap","title":"Roadmap","text":"<p>Adding new functionality. Can change.</p> <ul> <li> drf serializer serializer for automatic form generation on the front when working through rest api. (An npm package on vuejs will also be developed generating form based on response from api).</li> <li> Authorization backend for authorization by a pair of email and password.</li> <li> Functionality for working with images.<ul> <li> Image editor like easy_thumbnails.</li> <li> A field for the drf serializer that returns a set of images (for example, a standard image and a double-sized image for a retina screen), as well as in different formats (for example, in the original format and in webp).</li> <li> Job chain presets</li> <li> Tests</li> <li> Docs</li> </ul> </li> <li> Functionality similar to that described in the previous paragraph only for video.</li> <li> Functionality for loading private files available through nginx internal.</li> </ul>"},{"location":"#contributing","title":"Contributing","text":"<ul> <li> Use Git Flow (read here and here) to resolve the versioning</li> <li> Linter with a Ruff</li> <li> Formatter with a Black</li> <li> Lint commit with Gitlint and Conventional Commits</li> <li> Documentation with mkdocs and mkdocs-material</li> <li> Testing local with hatch</li> <li> Testing in CI/CD on push</li> <li> Add mypy ???</li> </ul>"},{"location":"SUMMARY/","title":"SUMMARY","text":"<ul> <li>Home</li> <li>Usage<ul> <li>Configurations</li> <li>Core</li> <li>API</li> <li>Protected</li> </ul> </li> <li>Code Reference</li> <li>Contributing<ul> <li>Introduction</li> <li>Documentations<ul> <li>Introduction</li> <li>Examples</li> </ul> </li> <li>Tests</li> </ul> </li> <li>Changelog</li> </ul>"},{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#120-2024-04-07","title":"1.2.0 (2024-04-07)","text":""},{"location":"changelog/#added","title":"Added","text":"<ul> <li>\u2728 (protected): Added functionality for protected files [7df25a1,1c2ec33,1994662,50eaaeb,e78f5a9,36f1f5b,a3332dc,532c147,7f15cc2]</li> <li>\u2728 (thumbnail): Functionality for creating thumbnails [76b4002,77e3180,db3b97f,80056a6]</li> <li>\u2728 (conf): Now can specify params with lists and dicts for import [1ac4770,287c027,46f936c]</li> <li>\u2795 (project): Added optional dependency for crypt utilities [9f69d7d]</li> <li>\u2705 (tests): Tests Update [5b0666c,10941a8,3b7d2a0,eb822e3,018ed05,3f02334,af32278]</li> </ul>"},{"location":"changelog/#changed","title":"Changed","text":"<ul> <li>\ud83c\udfa8 (docs): Add more badges! [b47f096]</li> <li>\u267b\ufe0f (api): Updated error handler now it covers large variations of errors [db3c0ef]</li> </ul>"},{"location":"changelog/#fixed","title":"Fixed","text":"<ul> <li>\ud83d\udc9a (docs): We slightly corrected the documentation build [5fba766]</li> <li>\ud83d\udc1b (docs): Correction of the documentation build [d406900,1e0a9c4]</li> </ul>"},{"location":"changelog/#miscellaneous","title":"Miscellaneous","text":"<ul> <li>\ud83d\udc77 (project): Script for updating changelog [6395ad6]</li> <li>\ud83d\udc77 (buid): Updating the build system and dependency versions [5c8af5b]</li> <li>\ud83d\udcdd (docs): Fix docs references [774330f,6fa656c,d2094fe]</li> <li>\ud83d\udcdd (docs): Added model fields to the documentation. [3a35d7e]</li> <li>\ud83d\udc77 (gh actions): Update Action Versions [0b8b57d,d76721f]</li> <li>\ud83d\udcdd (docs): Correcting links in documentation [c3135f1]</li> <li>\ud83d\udcdd (docs): Corrected the README text so that the link to the documentation is more visible [04efe31]</li> <li>\ud83d\udcdd (docs): Documentation text update [8302403]</li> <li>\ud83d\udcdd (docs): Changelog update [1c9a601]</li> </ul>"},{"location":"changelog/#110-2023-07-28","title":"1.1.0 (2023-07-28)","text":""},{"location":"changelog/#added_1","title":"Added","text":"<ul> <li>\u2728 (api): Added a view that applies OpenAPISchemaPatcher [f214caf]</li> <li>\u2728 (api): Added OpenAPI3 object patcher [45e40a5]</li> <li>\u2728 (api): Advanced Router [74318b3]</li> <li>\u2728 (api): DRF error handler [c5546ba]</li> <li>\u2728 (core): Added a method to get links to the front [3b3171f]</li> <li>\u2728 (core): Functions for encryption and decryption [011f875]</li> <li>\u2728 (core): Universal manager for all meringue models [59d88fd,57f1af6]</li> </ul>"},{"location":"changelog/#changed_1","title":"Changed","text":"<ul> <li>\ud83d\udd27 (tests): Update dependency versions for tests [81c1ee3]</li> <li>\ud83d\udd27 (tests): Updated dependency matrix for testing [a61e889,de9f435]</li> <li>\ud83d\udd27 (package): Upgrading dependency versions [3a0d745]</li> <li>\ud83d\udd27 (github): Updated github workflows configurations [16e2272,f48c999,0e58a15,c2144ba,bce9865]</li> <li>\ud83d\udd27 (project): Build update [1e0a9c4]</li> </ul>"},{"location":"changelog/#miscellaneous_1","title":"Miscellaneous","text":"<ul> <li>\ud83d\udcdd (docs): Documentation update [5873881,3803f69,8cbec19,0a86a5a,59bd450,f483929,6ba2fd7,c28409c,d76721f]</li> <li>\ud83d\udcdd (docs): Updated changelog [1964919]</li> </ul>"},{"location":"changelog/#100-2023-07-03","title":"1.0.0 (2023-07-03)","text":""},{"location":"changelog/#added_2","title":"Added","text":"<ul> <li>\u2728 (core): Added translations [ce3072e]</li> <li>\u2728 (core): Method for sorting elements [6700b69]</li> </ul>"},{"location":"changelog/#changed_2","title":"Changed","text":"<ul> <li>\u267b\ufe0f (core): Refactoring simply register of fields for translation [195bd02]</li> <li>\u267b\ufe0f (core): Tag refactoring and date period display utilities [0f65c21]</li> <li>\u267b\ufe0f (core): Refactoring the copyright date tag [29aa1f3]</li> <li>\u267b\ufe0f (core): Refactor Mixin publications by dates [60921ce]</li> <li>\u267b\ufe0f (core): Refactor Publication Mixins [2deac17]</li> <li>\ud83d\udcac (repo): Consolidated emails for the git log [c40d0ac]</li> <li>\ud83d\udd27 (git): Added code style check when committing changes [0715020]</li> <li>\ud83d\udd27 (git): Now we use gitmoji for commits [20b5439]</li> <li>\u267b\ufe0f (core): Refactor Upload Handlers [be985dc,a3798af]</li> <li>\u267b\ufe0f (conf): Updated package settings [4f50bbf,7b0dc93,b169cbe,0e47630]</li> <li>\ud83d\udd27 (lint): Codestyle and linter setup [42b10d3]</li> <li>\u267b\ufe0f (refactor): Codestyle and linter [96fb5dc,e3e5d2c,6889005,c946165,b4aad26]</li> <li>\ud83d\udd27 (tests): Added and configured tests [197f44d,a4a222f,64dc6d2,ff2e063,ec8cab6,2688f5e,ae7a17c]</li> <li>\ud83d\udd27 (tests): Tests on push hook to github [414093f,f5e5ac3,fad22df,8b2d6e7,05213cd,6fbe7ad,a34e34f,17a41f8,855a7a4,4f03343,bab6bad,2395a7d]</li> <li>\ud83d\udd27 (docs): Added and initially configured mkdocs [fa99cd4,b7cec98,53d65f0,5b50423,7203552,eaaeafa,241f5dd,bafc88f,360c58e,70c5a21,725df13,4a9f1d6,941914f,7eb5689,9186657]</li> <li>\ud83d\udd27 (docs): Publishing documentation in github pages [c5a1b03,ac3eb62,1aa4afe,ac2bc72,85562dc,f892e78]</li> <li>\ud83d\udd27 (docs): Build and publication of documentation ready [e63c170,1f91c9c,c00fa81]</li> </ul>"},{"location":"changelog/#removed","title":"Removed","text":"<ul> <li>\u2796 (build): Removed unnecessary dependencies [26cfe6e]</li> <li>\u2796 (refactor): Removed old functionality and unnecessary code [aeb164d,e486871,886046a]</li> </ul>"},{"location":"changelog/#miscellaneous_2","title":"Miscellaneous","text":"<ul> <li>\ud83e\udd5a (core): Im a teapot [3e46460]</li> <li>\ud83e\uddea (conf): Tests for the Settings class [20741e1,11352b6]</li> <li>\ud83c\udf10 (docs): Translation of documentation into English [5b00c3a,a4b5e8e]</li> <li>\ud83d\udcdd (docs): Documentation text update [5fd1a8c,e59522f,32dae99,ececaf9,bd4ec8d,1f1fb0b]</li> </ul>"},{"location":"changelog/#040-2023-04-27","title":"0.4.0 (2023-04-27)","text":""},{"location":"changelog/#added_3","title":"Added","text":"<ul> <li>Added PublishManager.unpublished method [c64c3bf]</li> <li>Added PublishQuerySet [474d232]</li> <li>Added SortingMixin [79cea39]</li> <li>Added unify_email and unify_phone utilities [52fca41]</li> <li>Added template redefining drf base template to remove drf title [b5bab76]</li> </ul>"},{"location":"changelog/#changed_3","title":"Changed","text":"<ul> <li>update settings [5c0fb4d]</li> <li>update version print function [a8f6fa5]</li> </ul>"},{"location":"changelog/#miscellaneous_3","title":"Miscellaneous","text":"<ul> <li>License type changed [c48791f]</li> <li>refact: Updated package build system [304daff]</li> <li>update setup script [ea51888]</li> <li>update files permissions [0602649]</li> <li>clear code [fc56a8b]</li> <li>update settings [5c0fb4d]</li> <li>more structure updates [91f4de8]</li> <li>some fixes thumbnails [72f69e0]</li> <li>add labels for apps [2657aeb]</li> <li>rename PublishModel -&gt; PublishedBase [5d1bcce]</li> </ul>"},{"location":"changelog/#035-2015-08-25","title":"0.3.5 (2015-08-25)","text":""},{"location":"changelog/#added_4","title":"Added","text":"<ul> <li>Added tag get_with_args_and_kwargs [4ba35a3]</li> <li>Added CMTimeMixin [7181497]</li> </ul>"},{"location":"changelog/#changed_4","title":"Changed","text":"<ul> <li>Method for renaming files moved to config [690daae]</li> </ul>"},{"location":"changelog/#miscellaneous_4","title":"Miscellaneous","text":"<ul> <li>verlib added to required dependencies</li> <li>Various fixes [b149eef,27f6fdd,4efb75c,1501eb0,528812d,cbd8d2b,492ec55,94d2c6c,ead91c3]</li> <li>upload_handlers fix hash [833a033]</li> <li>Deprecate get_version [1534329]</li> <li>Setup reconfigure [fe928fa]</li> </ul>"},{"location":"changelog/#034-2015-08-22","title":"0.3.4 (2015-08-22)","text":""},{"location":"changelog/#added_5","title":"Added","text":"<ul> <li>Added documentation with sphinx [dd0ff73]</li> <li>Added add_placeholder tag to set placeholder field [9a1847b]</li> </ul>"},{"location":"changelog/#miscellaneous_5","title":"Miscellaneous","text":"<ul> <li>Updated dependencies</li> <li>upload_handlers fixed to work with django 1.8 [0d85888]</li> </ul>"},{"location":"changelog/#033-2015-05-09","title":"0.3.3 (2015-05-09)","text":""},{"location":"changelog/#miscellaneous_6","title":"Miscellaneous","text":"<ul> <li> <p>put_css/put_js:</p> </li> <li> <p>\u043f\u043e\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430 \u0441\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 .map</p> </li> <li>\u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 MERINGUE_LOAD_MINI \u0432 settings \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0449\u0438\u0439 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u0438\u043b\u0438 \u043d\u0435\u0442 (default = DEBUG)</li> </ul> <p></p>"},{"location":"changelog/#032-2015-05-09","title":"0.3.2 (2015-05-09)","text":""},{"location":"changelog/#miscellaneous_7","title":"Miscellaneous","text":"<ul> <li>fix PutStatic._fix_map_link [a69232e]</li> </ul>"},{"location":"changelog/#031-2015-05-07","title":"0.3.1 (2015-05-07)","text":""},{"location":"changelog/#added_6","title":"Added","text":"<ul> <li>Added get_version method [a63fc47]</li> <li>Added unify_email to unify emails</li> <li>Added put_js</li> <li>Added put_css</li> <li>Added put_reset</li> </ul>"},{"location":"changelog/#changed_5","title":"Changed","text":"<ul> <li>Updated build in egg [4828fa2]</li> <li>Text printing, replaced by logging [e1ccffd]</li> <li>upload_handlers now uses sha256 instead of md5</li> <li>Updated dependencies</li> </ul>"},{"location":"changelog/#miscellaneous_8","title":"Miscellaneous","text":"<ul> <li>\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0430 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0430\u044f formset_factory \u0434\u043b\u044f \u0442\u043e\u0433\u043e \u0447\u0442\u043e \u0431\u044b \u0432\u044b\u0441\u0442\u0430\u0432\u043b\u044f\u043b\u0430 \u043f\u0440\u0435\u0444\u0438\u043a\u0441 \u043d\u0430 \u0432\u0441\u0435 \u0444\u043e\u0440\u043c\u044b \u043d\u0430\u0431\u043e\u0440\u0430 \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0449\u0438\u0435</li> <li>form_fieldsets - \u043f\u0440\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438 \u0440\u0430\u0437\u0431\u0438\u0432\u0430\u0435\u0442 \u0444\u043e\u0440\u043c\u0443 \u043f\u043e \u0433\u0440\u0443\u043f\u043f\u0430\u043c (fieldset)</li> <li>\u0428\u0430\u0431\u043b\u043e\u043d\u043d\u044b\u0439 \u0442\u0435\u0433 field_render \u0432\u044b\u0432\u043e\u0434\u0438\u0442 \u043f\u043e\u043b\u044f \u0444\u043e\u0440\u043c \u0432 \u0437\u0430\u0440\u0430\u043d\u0435\u0435 \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u043c \u0432\u0438\u0434\u0435</li> <li>\u0428\u0430\u0431\u043b\u043e\u043d\u043d\u044b\u0439 \u0442\u0435\u0433 field_render_classes \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u044e\u0449\u0438\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u043a\u043b\u0430\u0441\u0441\u043e\u0432 \u0434\u043b\u044f \u043f\u043e\u043b\u044f</li> <li>\u0414\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440 anonymous_required \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0430\u044e\u0449\u0438\u0439 \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0435\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439</li> </ul>"},{"location":"changelog/#030-2014-07-13","title":"0.3.0 (2014-07-13)","text":""},{"location":"changelog/#added_7","title":"Added","text":"<ul> <li>Added GetAbsoluteUrlMixin</li> <li>Added PreviewImageFileInput</li> </ul>"},{"location":"changelog/#changed_6","title":"Changed","text":"<ul> <li>Renaming files in upload_handlers using file hash sum</li> </ul>"},{"location":"changelog/#miscellaneous_9","title":"Miscellaneous","text":"<ul> <li>Library build in egg</li> <li>Refinement of existing opportunities</li> <li>Documentation + tasklist [fa248d1,541ee26,19bf3e9]</li> <li>LICENSE GNU GPL v3 [239df42]</li> <li>Lint [6b3337f]</li> <li>Fixed bug with UrlPatterns if name is not urls.py</li> </ul>"},{"location":"dev/contributing/","title":"Introduction","text":"<p>aazgbtr32# Contributing</p> <p>Please don't be shy - comment, discuss and suggest whatever you think is important in the discussions on github, if you notice a bug please describe it in issues, and if you decide to contribute to the development of the project, feel free to send pull request, and if possible, read further during development this section.</p> <p>When developing, modifying and fixing a feature, please fill in and correct all annotations and docstrings in the code, and also try, if possible, to fill in / supplement the description of the functionality and its use in the section of the documentation, also add tests for new or fixed functionality, read more below:</p>"},{"location":"dev/contributing/#environment","title":"Environment","text":"<p>To work, you need a configured environment, for this there is the following script:</p> <pre><code>$ hatch run init\n</code></pre> <p>Note</p> <p>All development is done using hatch. To work with it, you will need to install it globally, I advise you to do this using pipx.</p> <p>This script will completely configure the environment - configure gitflow, connect git hooks, and install and configure a virtual environment, to run python in this environment, run the following command:</p> <pre><code>$ hatch run ipython\n</code></pre>"},{"location":"dev/contributing/#git-flow","title":"Git flow","text":"<p>As you develop and refine, please try to keep your repository consistent with gitflow.</p> <p>Question</p> <p>Probably this point will change, the library is actively developed, I took this approach as a familiar one, however, I think that it will need to be changed. If you have any suggestions I'll be happy to listen.</p>"},{"location":"dev/contributing/#internationalization","title":"Internationalization","text":"<p>To add translations there are two useful commands:</p>"},{"location":"dev/contributing/#makemessages","title":"<code>makemessages</code>","text":"<p>This is a wrapper around the makemessages django command and creates/updates localization files in each meringue application.</p> <pre><code>$ hatch run makemessages\n</code></pre>"},{"location":"dev/contributing/#compilemessages","title":"<code>compilemessages</code>","text":"<p>This is a wrapper around the compilemessages django command and compiles all translations.</p> <pre><code>$ hatch run compilemessages\n</code></pre>"},{"location":"dev/contributing/#tests","title":"Tests","text":"<p>When working on a project, it is extremely important to cover everything with tests in order to avoid problems and errors in the code. See working on tests in the appropriate section.</p>"},{"location":"dev/contributing/#documentation","title":"Documentation","text":"<p>The documentation is implemented using the mkdocs generator and the mkdocs material theme. When working on library functionality, two main sections usage and reference are important. For more information about developing documentation, see the corresponding section.</p>"},{"location":"dev/contributing/#versioning","title":"Versioning","text":"<p>To update the version, use hatch version</p> <p>show current version:</p> <pre><code>$ hatch version\n1.0.0a0\n</code></pre> <p>update patch and beta version from <code>1.0.0a0</code> to <code>1.0.1b0</code></p> <pre><code>$ hatch version patch,beta\nOld: 1.0.0a0\nNew: 1.0.1b0\n</code></pre>"},{"location":"dev/contributing/#commit-message-convention","title":"Commit message convention","text":"<p>To write a commit, we adhere to the Conventional Commits specification, as well as gitmoji as a special case of conventional commits. You can use gitmoji-cli for this process. This is necessary for the automatic generation of the changelog.</p> <p>Info</p> <p>The list of emoji needs to be improved, now it is bloated and there are controversial points like  which means deleting the code...</p>"},{"location":"dev/contributing/#changelog-generation","title":"Changelog generation","text":"<p>To generate the changelog, the gitmoji-changelog utility is used as part of the command:</p> <pre><code>$ hatch run changelog-update\n</code></pre> <p>All tags will be pulled from the repository, and a changelog will be generated based on the commits.</p>"},{"location":"dev/contributing/#building-and-publishing","title":"Building and publishing","text":"<p>For the build, hatch is used and to build the library there is the following command:</p> <pre><code>$ hatch build\n</code></pre> <p>This command is provided by hatch and for more details on how it works, it is better to look at the hatch documentation.</p> <p>The build and upload of releases is implemented in GitHub Actions and occurs automatically when pushing release tags like <code>v*</code>.</p> <p>More details on how to set up a build and upload can be found in the workflow config.</p>"},{"location":"dev/tests/","title":"Tests","text":"<p>The project uses pytest for testing, as well as set up coverage tests using pytest-cov, it is highly recommended for review.</p>"},{"location":"dev/tests/#usage","title":"Usage","text":"<p>You can run tests in a development environment with the following command:</p> <pre><code>$ hatch run test:check\n</code></pre> <p>A matrix for a set of python and django versions is also configured in hatch, you can see more about this in the settings in the <code>pyproject.toml</code> file, you can run the entire test matrix with the hatch script:</p> <pre><code>$ hatch run mtest:check\n</code></pre>"},{"location":"dev/tests/#development","title":"Development","text":"<p>When developing tests, you may need to create new migrations, this can be done with the following command</p> <pre><code>$ hatch run test:makemigrations\n</code></pre> <p>The application used in the tests lies in the <code>test_project</code> directory.</p> <p>The database is used by in-memory SQLite.</p>"},{"location":"dev/tests/#autotests","title":"Autotests","text":"<p>Tests are automatically processed when pushing to <code>master</code> and release branches <code>release/*</code>. See workflow config for details.</p> <p>In the process, test results are uploaded to codecov.io.</p>"},{"location":"dev/docs/","title":"Documentation","text":"<p>To develop documentation, use mkdocs with the theme mkdocs-material.</p> <p>Sources for documentation generation parse mkdocstring-python which can handle multiple formats, we use Google-style (this only applies to docstrings), but not pure, and its variation is napoleon (But of course this is a debatable issue, and we can change if there are suggestions).</p>"},{"location":"dev/docs/#local-development","title":"Local development","text":"<p>In the simplest case, running a local server with development documentation would look like this:</p> <pre><code>$ hatch run docs:serve\n</code></pre>"},{"location":"dev/docs/#configuration","title":"Configuration","text":"<p>There are several options for documentation configuration:</p>"},{"location":"dev/docs/#meringue_mkdocs_code_parce_enabled","title":"<code>MERINGUE_MKDOCS_CODE_PARCE_ENABLED</code>","text":"<code>default: true</code> <p>Enabling / disabling the output of sources in the documentation \"on-the-fly\" (organized based on the example from the mkdocstrings documentation).</p>"},{"location":"dev/docs/#meringue_mkdocs_code_parce_source_path","title":"<code>MERINGUE_MKDOCS_CODE_PARCE_SOURCE_PATH</code>","text":"<code>default: \"meringue\"</code> <p>A directory with sources for \"on-the-fly\" generation.</p>"},{"location":"dev/docs/#meringue_mkdocs_code_parce_docs_path","title":"<code>MERINGUE_MKDOCS_CODE_PARCE_DOCS_PATH</code>","text":"<code>default: \"reference\"</code> <p>Documentation directory for displaying \"on-the-fly\" generated source documentation.</p>"},{"location":"dev/docs/#meringue_mkdocs_code_parce_show_nav","title":"<code>MERINGUE_MKDOCS_CODE_PARCE_SHOW_NAV</code>","text":"<code>default: false</code> <p>Parameter for debugging generated \"on-the-fly\" navigation.</p>"},{"location":"dev/docs/#meringue_mkdocs_enabled_git_revision_date","title":"<code>MERINGUE_MKDOCS_ENABLED_GIT_REVISION_DATE</code>","text":"<code>default: true</code> <p>Option to enable/disable modification dates for documentation files. It will be useful to disable it when developing locally so that the console is not clogged with errors.</p>"},{"location":"dev/docs/#meringue_mkdocs_offline","title":"<code>MERINGUE_MKDOCS_OFFLINE</code>","text":"<code>default: false</code> <p>Parameter for building documentation into a build working from a folder, without the need to start the server. read more about the mechanism here.</p>"},{"location":"dev/docs/#meringue_mkdocs_enable_minify","title":"<code>MERINGUE_MKDOCS_ENABLE_MINIFY</code>","text":"<code>default: true</code> <p>Parameter to enable plugin minify minifying html, js and css when generating documentation.</p> <p>When working with local server documentation, this option is disabled.</p>"},{"location":"dev/docs/#building-and-publishing","title":"Building and publishing","text":"<p>There is a separate <code>hatch run docs:build</code> command for building documentation.</p> <p>But before pushing the updated documentation, please run the <code>hatch run docs:build-check</code> command, it will build the documentation and check the links for broken ones.</p> <p>Documentation is collected in GitHub Actions and uploaded to the gh-pages branch and published using GitHub Pages.</p> <p>The documentation is automatically collected and rolled out when pushing the release tag (<code>v*</code>), and when pushing to the <code>dev</code> branch, the dev version of the documentation is updated.</p> <p>You can learn more about these processes in the workflow config.</p>"},{"location":"dev/docs/examples/","title":"Examples of blocks for writing documentation","text":"<p>A collection of examples of non-obvious blocks that can be used when writing documentation.</p>"},{"location":"dev/docs/examples/#admonitions","title":"Admonitions","text":"<p>docs | supported types</p> CodePreview <pre><code>!!! note\n\n\tYou should note that the title will be automatically capitalized.\n</code></pre> <p>Note</p> <p>You should note that the title will be automatically capitalized.</p>"},{"location":"dev/docs/examples/#inline-usage","title":"inline usage","text":"inline end inline <p>Lorem ipsum</p> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.</p> <pre><code>!!! info inline end \"Lorem ipsum\"\n\n\tLorem ipsum dolor sit amet, consectetur\n\tadipiscing elit. Nulla et euismod nulla.\n\tCurabitur feugiat, tortor non consequat\n\tfinibus, justo purus auctor massa, nec\n\tsemper lorem quam in massa.\n</code></pre> <p>Use <code>inline end</code> to align to the right (left for rtl languages).</p> <p>Lorem ipsum</p> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.</p> <pre><code>!!! info inline \"Lorem ipsum\"\n\n\tLorem ipsum dolor sit amet, consectetur\n\tadipiscing elit. Nulla et euismod nulla.\n\tCurabitur feugiat, tortor non consequat\n\tfinibus, justo purus auctor massa, nec\n\tsemper lorem quam in massa.\n</code></pre> <p>Use <code>inline</code> to align to the left (right for rtl languages).</p>"},{"location":"dev/docs/examples/#collapsible-blocks","title":"Collapsible blocks","text":"<p>docs</p> <pre><code>???+ note \"Open styled details\"\n\n\t??? danger \"Nested details!\"\n\t\tAnd more content again.\n</code></pre> Open styled details Nested details! <p>And more content again.</p>"},{"location":"dev/docs/examples/#footnotes","title":"Footnotes","text":"<p>docs</p> <pre><code>Footnotes[^1] have a label[^test-label] and the footnote's content.\n\n[^1]: This is a footnote content.\n[^test-label]: A footnote on the label: \"test-label\".\n</code></pre> <p>Footnotes<sup>1</sup> have a label<sup>2</sup> and the footnote's content.</p>"},{"location":"dev/docs/examples/#highlight","title":"Highlight","text":"<p>docs</p> CodePreview <pre><code>```console linenums=\"42\" hl_lines=\"1 4-6\"\n$ echo hello world!\nhello world!\n\n$ git clone git@github.com:dd/Meringue.git\n$ cd Meringue\n$ hatch run docs:serve\nINFO     -  Building documentation...\nINFO     -  Cleaning site directory\nINFO     -  mkdocstrings_handlers: Formatting signatures requires Black to be\n\t\t\tinstalled.\nINFO     -  Documentation built in 1.96 seconds\nINFO     -  [02:05:37] Watching paths for changes: 'docs/src', 'mkdocs.yml',\n\t\t\t'docs/theme', 'meringue', 'README.md'\nINFO     -  [02:05:37] Serving on http://127.0.0.1:7000/\n```\n</code></pre> <pre><code>```pycon\n&gt;&gt;&gt; for word in (\"Hello\", \"mkdocstrings!\"):\n...     print(word, end=\" \")\n...\nHello mkdocstrings!\n```\n</code></pre> <pre><code>$ echo hello world!\nhello world!\n\n$ git clone git@github.com:dd/Meringue.git\n$ cd Meringue\n$ hatch run docs:serve\nINFO     -  Building documentation...\nINFO     -  Cleaning site directory\nINFO     -  mkdocstrings_handlers: Formatting signatures requires Black to be\n\t\t\tinstalled.\nINFO     -  Documentation built in 1.96 seconds\nINFO     -  [02:05:37] Watching paths for changes: 'docs/src', 'mkdocs.yml',\n\t\t\t'docs/theme', 'meringue', 'README.md'\nINFO     -  [02:05:37] Serving on http://127.0.0.1:7000/\n</code></pre> <pre><code>&gt;&gt;&gt; for word in (\"Hello\", \"mkdocstrings!\"):\n...     print(word, end=\" \")\n...\nHello mkdocstrings!\n</code></pre>"},{"location":"dev/docs/examples/#inline","title":"Inline","text":"<p>docs</p> <pre><code>`#!console $ python3 manage.py runserver`\n</code></pre> <p><code>$ python3 manage.py runserver</code></p> <pre><code>`#!python3 import this`\n</code></pre> <p><code>import this</code></p>"},{"location":"dev/docs/examples/#annotates","title":"Annotates","text":"<p>docs</p> <pre><code>```python\nimport this # (1)\n```\n\n1.  :fontawesome-brands-python: Simple is better than complex.\n</code></pre> <pre><code>import this # (1)\n</code></pre> <ol> <li> Simple is better than complex.</li> </ol>"},{"location":"dev/docs/examples/#diagrams","title":"Diagrams","text":"<p>docs</p> <pre><code>```mermaid\ngraph LR\n  A[Start] --&gt; B{Error?};\n  B --&gt;|Yes| C[Hmm...];\n  C --&gt; D[Debug];\n  D --&gt; B;\n  B ----&gt;|No| E[Yay!];\n```\n</code></pre> <pre><code>graph LR\n  A[Start] --&gt; B{Error?};\n  B --&gt;|Yes| C[Hmm...];\n  C --&gt; D[Debug];\n  D --&gt; B;\n  B ----&gt;|No| E[Yay!];</code></pre>"},{"location":"dev/docs/examples/#content-tabs","title":"Content tabs","text":"<p>docs</p> <pre><code>=== \"Tab 1\"\n\tMarkdown **content**.\n\n\tMultiple paragraphs.\n\n=== \"Tab 2\"\n\tMore Markdown **content**.\n\n\t- list item a\n\t- list item b\n</code></pre> Tab 1Tab 2 <p>Markdown content.</p> <p>Multiple paragraphs.</p> <p>More Markdown content.</p> <ul> <li>list item a</li> <li>list item b</li> </ul>"},{"location":"dev/docs/examples/#smart-symbols","title":"Smart Symbols","text":"<p>docs</p> Markdown Result Markdown Result <code>(tm)</code> \u2122 <code>&lt;--</code> \u2190 <code>(c)</code> \u00a9 <code>&lt;--&gt;</code> \u2194 <code>(r)</code> \u00ae <code>=/=</code> \u2260 <code>c/o</code> \u2105 <code>1/4, etc.</code> \u00bc, etc. <code>+/-</code> \u00b1 <code>1st 2nd etc.</code> 1<sup>st</sup> 2<sup>nd</sup> etc. <code>--&gt;</code> \u2192"},{"location":"dev/docs/examples/#keys","title":"Keys","text":"<p>docs</p> <pre><code>++ctrl+alt+delete++\n</code></pre> <p>Ctrl+Alt+Del</p>"},{"location":"dev/docs/examples/#icons-and-emojis","title":"Icons and Emojis","text":"<p>docs | icon search</p> <pre><code>:fontawesome-brands-twitter:{ .twitter } :smile: :heart: :thumbsup:\n</code></pre> <p> </p>"},{"location":"dev/docs/examples/#tooltips","title":"Tooltips","text":"<p>docs</p> <pre><code>[Hover me](https://example.com \"I'm a tooltip!\")\n</code></pre> <p>Hover me</p>"},{"location":"dev/docs/examples/#lists","title":"Lists","text":"<p>docs</p> CodePreview <pre><code>- [X] item 1\n\t* [X] item A\n\t* [ ] item B\n\t\tmore text\n\t\t+ [x] item a\n\t\t+ [ ] item b\n\t\t+ [x] item c\n\t* [X] item C\n- [ ] item 2\n- [ ] item 3\n</code></pre> <ul> <li> item 1<ul> <li> item A</li> <li> item B     more text<ul> <li> item a</li> <li> item b</li> <li> item c</li> </ul> </li> <li> item C</li> </ul> </li> <li> item 2</li> <li> item 3</li> </ul>"},{"location":"dev/docs/examples/#tables","title":"Tables","text":"<p>docs</p> CodePreview <pre><code>First Header | Second Header\n------------ | -------------\nContent Cell | Content Cell\nContent Cell | Content Cell\n</code></pre> First Header Second Header Content Cell Content Cell Content Cell Content Cell <ol> <li> <p>This is a footnote content.\u00a0\u21a9</p> </li> <li> <p>A footnote on the label: \"test-label\".\u00a0\u21a9</p> </li> </ol>"},{"location":"reference/SUMMARY/","title":"SUMMARY","text":"<ul> <li>protected<ul> <li>_init_.py</li> <li>apps.py</li> <li>fields.py</li> <li>utils.py</li> <li>views.py</li> </ul> </li> <li>thumbnail<ul> <li>templatetags<ul> <li>_init_.py</li> <li>m_thumbnails.py</li> </ul> </li> <li>_init_.py</li> <li>actions.py</li> <li>apps.py</li> <li>constants.py</li> <li>drf_fields.py</li> <li>exceptions.py</li> <li>generators.py</li> <li>images.py</li> <li>properties.py</li> <li>shortcuts.py</li> <li>storage.py</li> <li>types.py</li> </ul> </li> <li>api<ul> <li>docs<ul> <li>_init_.py</li> <li>patchers.py</li> <li>views.py</li> </ul> </li> <li>_init_.py</li> <li>apps.py</li> <li>handlers.py</li> <li>routers.py</li> <li>utils.py</li> </ul> </li> <li>conf<ul> <li>_init_.py</li> <li>default_settings.py</li> </ul> </li> <li>core<ul> <li>templatetags<ul> <li>_init_.py</li> <li>meringue_base.py</li> </ul> </li> <li>utils<ul> <li>_init_.py</li> <li>crypt.py</li> <li>datetime.py</li> <li>frontend.py</li> </ul> </li> <li>_init_.py</li> <li>apps.py</li> <li>db.py</li> <li>models.py</li> <li>options.py</li> <li>query.py</li> <li>translation.py</li> <li>upload_handlers.py</li> <li>views.py</li> </ul> </li> <li>_init_.py</li> </ul>"},{"location":"reference/meringue/__init__/","title":"__init__.py","text":""},{"location":"reference/meringue/__init__/#meringue","title":"meringue","text":""},{"location":"reference/meringue/__init__/#meringue.__version__","title":"__version__  <code>module-attribute</code>","text":"<pre><code>__version__ = '1.3.0.dev2'\n</code></pre> <p>To update the version, use hatch version</p> <p>show current version:</p> <pre><code>$ hatch version\n1.0.0a0\n</code></pre> <p>update patch and beta version from <code>1.0.0a0</code> to <code>1.0.1b0</code></p> <pre><code>$ hatch version patch,beta\nOld: 1.0.0a0\nNew: 1.0.1b0\n</code></pre>"},{"location":"reference/meringue/api/__init__/","title":"__init__.py","text":""},{"location":"reference/meringue/api/__init__/#meringue.api","title":"meringue.api","text":""},{"location":"reference/meringue/api/apps/","title":"apps.py","text":""},{"location":"reference/meringue/api/apps/#meringue.api.apps","title":"meringue.api.apps","text":""},{"location":"reference/meringue/api/handlers/","title":"handlers.py","text":""},{"location":"reference/meringue/api/handlers/#meringue.api.handlers","title":"meringue.api.handlers","text":""},{"location":"reference/meringue/api/handlers/#meringue.api.handlers.exception_handler","title":"exception_handler","text":"<pre><code>exception_handler(exc, context)\n</code></pre> <p>Error handler returning message and error code pairs.</p> <p>The handler is a wrapper over the standard handler <code>rest_framework.views.exception_handler</code>.</p> Source code in <code>meringue/api/handlers.py</code> <pre><code>def exception_handler(exc, context):\n    \"\"\"\n    Error handler returning message and error code pairs.\n\n    The handler is a wrapper over the standard handler `rest_framework.views.exception_handler`.\n    \"\"\"\n\n    response = views.exception_handler(exc, context)\n\n    if response is None:\n        return response\n\n    if isinstance(exc, Http404 | PermissionDenied):\n        # django Http404 and PermissionDenied errors are substituted for drf errors,\n        # in `rest_framework.views.exception_handler` method.\n        response.data = render_error_details(response.data[\"detail\"])\n\n    elif DetailDictMixin and isinstance(exc, DetailDictMixin):\n        response.data = render_error_details(exc)\n\n    elif isinstance(exc, exceptions.APIException):\n        response.data = render_error_details(exc.detail)\n\n    return response\n</code></pre>"},{"location":"reference/meringue/api/routers/","title":"routers.py","text":""},{"location":"reference/meringue/api/routers/#meringue.api.routers","title":"meringue.api.routers","text":""},{"location":"reference/meringue/api/routers/#meringue.api.routers.ObjectRoute","title":"ObjectRoute  <code>module-attribute</code>","text":"<pre><code>ObjectRoute = namedtuple(\n    \"ObjectRoute\",\n    [\"url\", \"mapping\", \"name\", \"detail\", \"initkwargs\"],\n)\n</code></pre> <p>Object predefined detail route.</p>"},{"location":"reference/meringue/api/routers/#meringue.api.routers.MeringueRouter","title":"MeringueRouter","text":"<p>               Bases: <code>DefaultRouter</code></p> <p>The default router is inherited from the original default router but with some modifications.</p>"},{"location":"reference/meringue/api/routers/#meringue.api.routers.MeringueRouter.get_api_root_view","title":"get_api_root_view","text":"<pre><code>get_api_root_view(api_urls=None)\n</code></pre> <p>Return a basic root view.</p> Source code in <code>meringue/api/routers.py</code> <pre><code>def get_api_root_view(self, api_urls=None):\n    \"\"\"\n    Return a basic root view.\n    \"\"\"\n\n    api_root_dict = OrderedDict()\n    object_name = self.routes[0].name\n    list_name = self.routes[1].name\n    for prefix, viewset, basename in self.registry:\n        if getattr(viewset, \"m_object_detail\", False):\n            api_root_dict[prefix] = object_name.format(basename=basename)\n        else:\n            api_root_dict[prefix] = list_name.format(basename=basename)\n\n    return self.APIRootView.as_view(api_root_dict=api_root_dict)\n</code></pre>"},{"location":"reference/meringue/api/routers/#meringue.api.routers.MeringueRouter.get_routes","title":"get_routes","text":"<pre><code>get_routes(viewset)\n</code></pre> <p>Extra routes are filtered according to the new route type.</p> Source code in <code>meringue/api/routers.py</code> <pre><code>def get_routes(self, viewset):\n    \"\"\"\n    Extra routes are filtered according to the new route type.\n    \"\"\"\n\n    tmp_routes = super().get_routes(viewset)\n    is_object_viewset = getattr(viewset, \"m_object_detail\", False)\n\n    routes = []\n    for route in tmp_routes:\n        is_object_route = isinstance(route, ObjectRoute)\n\n        if is_object_viewset:\n            is_list_view = route.name == \"{basename}-list\"\n            is_detail_view = route.name == \"{basename}-detail\"\n\n            if is_list_view or is_detail_view:\n                # ignore default list and detail routes\n                continue\n\n            routes.append(route)\n\n        elif not is_object_route:\n            routes.append(route)\n\n    return routes\n</code></pre>"},{"location":"reference/meringue/api/utils/","title":"utils.py","text":""},{"location":"reference/meringue/api/utils/#meringue.api.utils","title":"meringue.api.utils","text":""},{"location":"reference/meringue/api/utils/#meringue.api.utils.render_error_details","title":"render_error_details","text":"<pre><code>render_error_details(\n    error_detail: list | dict | ErrorDetail,\n) -&gt; list | dict\n</code></pre> <p>The method renders errors of the ErrorDetail format into message and code pairs.</p> <p>Attributes:</p> <ul> <li> <code>error_detail</code>           \u2013            <p>Errors.</p> </li> </ul> <p>Raises:</p> <ul> <li> <code>Exception</code>             \u2013            <p>Unknown error type.</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>list | dict</code>           \u2013            <p>Rendered errors.</p> </li> </ul> Source code in <code>meringue/api/utils.py</code> <pre><code>def render_error_details(error_detail: list | dict | ErrorDetail) -&gt; list | dict:\n    \"\"\"\n    The method renders errors of the ErrorDetail format into message and code pairs.\n\n    Attributes:\n        error_detail: Errors.\n\n    Raises:\n        Exception: Unknown error type.\n\n    Returns:\n        Rendered errors.\n    \"\"\"\n\n    if DetailDictMixin and isinstance(error_detail, DetailDictMixin):\n        return {\n            \"message\": error_detail.detail[\"detail\"],\n            \"code\": error_detail.detail[\"code\"],\n        }\n\n    elif isinstance(error_detail, list):\n        error_list = [render_error_details(e) for e in error_detail]\n        return error_list\n\n    elif isinstance(error_detail, ErrorDetail):\n        return {\n            \"message\": str(error_detail),\n            \"code\": error_detail.code,\n        }\n\n    elif isinstance(error_detail, dict):\n        error_dict = {f: render_error_details(e) for f, e in error_detail.items()}\n        return error_dict\n\n    msg = f\"Unknown error type {error_detail.__class__}: `{error_detail}`\"\n    raise Exception(msg)\n</code></pre>"},{"location":"reference/meringue/api/docs/__init__/","title":"__init__.py","text":""},{"location":"reference/meringue/api/docs/__init__/#meringue.api.docs","title":"meringue.api.docs","text":""},{"location":"reference/meringue/api/docs/__init__/#meringue.api.docs.OpenAPISchemaPatcher","title":"OpenAPISchemaPatcher","text":"<pre><code>OpenAPISchemaPatcher()\n</code></pre> <p>OpenApi3 patcher.</p> <p>https://swagger.io/specification/</p> <p>Info</p> <p><code>json.loads</code> -&gt; <code>json.dumps</code> - for render locale <code>__proxy__</code> (e.g. <code>gettext_lazy</code>)</p> Source code in <code>meringue/api/docs/patchers.py</code> <pre><code>def __init__(self):\n    self._security_schemes = {}\n    self._components_schemes = {}\n    self._tags_schemes = {}\n</code></pre>"},{"location":"reference/meringue/api/docs/__init__/#meringue.api.docs.OpenAPISchemaPatcher.register_security_scheme","title":"register_security_scheme","text":"<pre><code>register_security_scheme(name: str, scheme: dict)\n</code></pre> <p>Register security scheme.</p> <p>Attributes:</p> <ul> <li> <code>name</code>           \u2013            <p>Security scheme name.</p> </li> <li> <code>scheme</code>           \u2013            <p>Security scheme in Security Scheme Object or Reference Object format.</p> </li> </ul> <p>Raises:</p> <ul> <li> <code>Exception</code>             \u2013            <p>Security scheme already registered.</p> </li> </ul> Source code in <code>meringue/api/docs/patchers.py</code> <pre><code>def register_security_scheme(self, name: str, scheme: dict):\n    \"\"\"\n    Register security scheme.\n\n    Attributes:\n        name: Security scheme name.\n        scheme: Security scheme in [Security Scheme Object](https://swagger.io/specification/#s\n            ecurity-scheme-object) or [Reference Object format](https://swagger.io/specificatio\n            n/#reference-object).\n\n    Raises:\n        Exception: Security scheme already registered.\n    \"\"\"\n\n    if name in self._security_schemes:\n        msg = f\"Security scheme named `{name}` is already registered\"\n        raise Exception(msg)\n\n    self._security_schemes[name] = scheme\n</code></pre>"},{"location":"reference/meringue/api/docs/__init__/#meringue.api.docs.OpenAPISchemaPatcher.register_component_scheme","title":"register_component_scheme","text":"<pre><code>register_component_scheme(name: str, scheme: dict)\n</code></pre> <p>Register components scheme.</p> <p>Attributes:</p> <ul> <li> <code>name</code>           \u2013            <p>Component name.</p> </li> <li> <code>schema</code>           \u2013            <p>Formatted Component schema object.</p> </li> </ul> <p>Raises:</p> <ul> <li> <code>Exception</code>             \u2013            <p>Scheme is already registered.</p> </li> </ul> Source code in <code>meringue/api/docs/patchers.py</code> <pre><code>def register_component_scheme(self, name: str, scheme: dict):\n    \"\"\"\n    Register components scheme.\n\n    Attributes:\n        name: Component name.\n        schema: [Formatted](https://swagger.io/specification/#schema-object) Component schema\n            object.\n\n    Raises:\n        Exception: Scheme is already registered.\n    \"\"\"\n\n    if name in self._components_schemes:\n        msg = f\"Component named `{name}` is already registered\"\n        raise Exception(msg)\n\n    self._components_schemes[name] = scheme\n</code></pre>"},{"location":"reference/meringue/api/docs/__init__/#meringue.api.docs.OpenAPISchemaPatcher.register_tag","title":"register_tag","text":"<pre><code>register_tag(scheme: dict)\n</code></pre> <p>Register tag.</p> <p>Attributes:</p> <ul> <li> <code>scheme</code>           \u2013            <p>Tag scheme object.</p> </li> </ul> <p>Raises:</p> <ul> <li> <code>Exception</code>             \u2013            <p>Tag is already registered.</p> </li> </ul> Source code in <code>meringue/api/docs/patchers.py</code> <pre><code>def register_tag(self, scheme: dict):\n    \"\"\"\n    Register tag.\n\n    Attributes:\n        scheme: [Tag scheme object](https://swagger.io/specification/#tag-object).\n\n    Raises:\n        Exception: Tag is already registered.\n    \"\"\"\n    name = scheme[\"name\"]\n\n    if name in self._tags_schemes:\n        msg = f\"A tag named `{name}` is already registered\"\n        raise Exception(msg)\n\n    self._tags_schemes[name] = scheme\n</code></pre>"},{"location":"reference/meringue/api/docs/__init__/#meringue.api.docs.OpenAPISchemaPatcher.patch_description","title":"patch_description","text":"<pre><code>patch_description(openapi_schema: dict)\n</code></pre> <p>Adds a list of servers from the openapi schema source servers to the description.</p> <p>This method adds to the end of the description a list of servers that it takes from the corresponding section of the openapi schema.</p> <p>Attributes:</p> <ul> <li> <code>openapi_schema</code>           \u2013            <p>OpenAPI Object.</p> </li> </ul> Source code in <code>meringue/api/docs/patchers.py</code> <pre><code>def patch_description(self, openapi_schema: dict):\n    \"\"\"\n    Adds a list of servers from the openapi schema source servers to the description.\n\n    This method adds to the end of the description a list of servers that it takes from the\n    [corresponding section](https://swagger.io/specification/#server-object) of the openapi\n    schema.\n\n    Attributes:\n        openapi_schema: OpenAPI Object.\n    \"\"\"\n\n    if not openapi_schema.get(\"servers\", []):\n        return\n\n    openapi_schema.setdefault(\"info\", {})\n    openapi_schema[\"info\"].setdefault(\"description\", \"\")\n\n    for server in openapi_schema[\"servers\"]:\n        name = server[\"description\"]\n        full_url = server[\"url\"]\n        clear_url = full_url.split(\"://\")[1] if \"://\" in full_url else full_url\n        if openapi_schema[\"info\"][\"description\"]:\n            openapi_schema[\"info\"][\"description\"] += \"\\n\\n\"\n        openapi_schema[\"info\"][\"description\"] += f\"{name} API: [{clear_url}]({full_url})\"\n</code></pre>"},{"location":"reference/meringue/api/docs/__init__/#meringue.api.docs.OpenAPISchemaPatcher.patch_security_schemes","title":"patch_security_schemes","text":"<pre><code>patch_security_schemes(openapi_schema: dict)\n</code></pre> <p>Adds registered security schemes to the openapi schema.</p> <p>Attributes:</p> <ul> <li> <code>openapi_schema</code>           \u2013            <p>OpenAPI Object.</p> </li> </ul> <p>Raises:</p> <ul> <li> <code>Exception</code>             \u2013            <p>Security scheme already registered.</p> </li> </ul> Source code in <code>meringue/api/docs/patchers.py</code> <pre><code>def patch_security_schemes(self, openapi_schema: dict):\n    \"\"\"\n    Adds registered security schemes to the openapi schema.\n\n    Attributes:\n        openapi_schema: OpenAPI Object.\n\n    Raises:\n        Exception: Security scheme already registered.\n    \"\"\"\n\n    if not self._security_schemes:\n        return\n\n    openapi_schema.setdefault(\"components\", {})\n    openapi_schema[\"components\"].setdefault(\"securitySchemes\", {})\n\n    tmp_schemes = json.loads(json.dumps(self._security_schemes, cls=DjangoJSONEncoder))\n\n    for name, schema in tmp_schemes.items():\n        if name in openapi_schema[\"components\"][\"securitySchemes\"]:\n            msg = f\"Security scheme named `{name}` exists in the original schema\"\n            raise Exception(msg)\n\n        openapi_schema[\"components\"][\"securitySchemes\"][name] = schema\n</code></pre>"},{"location":"reference/meringue/api/docs/__init__/#meringue.api.docs.OpenAPISchemaPatcher.patch_component_schemes","title":"patch_component_schemes","text":"<pre><code>patch_component_schemes(openapi_schema: dict)\n</code></pre> <p>Adds registered components schemas to the openapi schema.</p> <p>Attributes:</p> <ul> <li> <code>openapi_schema</code>           \u2013            <p>OpenAPI Object.</p> </li> </ul> <p>Raises:</p> <ul> <li> <code>Exception</code>             \u2013            <p>Component schema is already registered.</p> </li> </ul> Source code in <code>meringue/api/docs/patchers.py</code> <pre><code>def patch_component_schemes(self, openapi_schema: dict):\n    \"\"\"\n    Adds registered components schemas to the openapi schema.\n\n    Attributes:\n        openapi_schema: OpenAPI Object.\n\n    Raises:\n        Exception: Component schema is already registered.\n    \"\"\"\n\n    if not self._components_schemes:\n        return\n\n    openapi_schema.setdefault(\"components\", {})\n    openapi_schema[\"components\"].setdefault(\"schemas\", {})\n\n    tmp_components = json.loads(json.dumps(self._components_schemes, cls=DjangoJSONEncoder))\n\n    for name, schema in tmp_components.items():\n        if name in openapi_schema[\"components\"][\"schemas\"]:\n            msg = f\"Component named `{name}` exists in the original schema\"\n            raise Exception(msg)\n\n        openapi_schema[\"components\"][\"schemas\"][name] = schema\n</code></pre>"},{"location":"reference/meringue/api/docs/__init__/#meringue.api.docs.OpenAPISchemaPatcher.patch_tags","title":"patch_tags","text":"<pre><code>patch_tags(openapi_schema: dict)\n</code></pre> <p>Adds registered components schemas to the openapi schema.</p> <p>Attributes:</p> <ul> <li> <code>openapi_schema</code>           \u2013            <p>OpenAPI Object.</p> </li> </ul> <p>Raises:</p> <ul> <li> <code>Exception</code>             \u2013            <p>A tag exists in the original schema.</p> </li> </ul> Source code in <code>meringue/api/docs/patchers.py</code> <pre><code>def patch_tags(self, openapi_schema: dict):\n    \"\"\"\n    Adds registered components schemas to the openapi schema.\n\n    Attributes:\n        openapi_schema: OpenAPI Object.\n\n    Raises:\n        Exception: A tag exists in the original schema.\n    \"\"\"\n\n    if not self._tags_schemes:\n        return\n\n    openapi_schema.setdefault(\"tags\", [])\n    exists_tags_schemes = (t[\"name\"] for t in openapi_schema[\"tags\"])\n    tmp_tags = json.loads(json.dumps(self._tags_schemes, cls=DjangoJSONEncoder))\n\n    for name, schema in tmp_tags.items():\n        if name in exists_tags_schemes:\n            msg = f\"A tag named `{name}` exists in the original schema\"\n            raise Exception(msg)\n\n        openapi_schema[\"tags\"].append(schema)\n</code></pre>"},{"location":"reference/meringue/api/docs/__init__/#meringue.api.docs.OpenAPISchemaPatcher.patch_schema","title":"patch_schema","text":"<pre><code>patch_schema(openapi_schema: dict)\n</code></pre> <p>Fully patch the schema.</p> Source code in <code>meringue/api/docs/patchers.py</code> <pre><code>def patch_schema(self, openapi_schema: dict):\n    \"\"\"\n    Fully patch the schema.\n    \"\"\"\n    self.patch_description(openapi_schema)\n    self.patch_security_schemes(openapi_schema)\n    self.patch_component_schemes(openapi_schema)\n    self.patch_tags(openapi_schema)\n</code></pre>"},{"location":"reference/meringue/api/docs/__init__/#meringue.api.docs.MeringueSpectacularAPIView","title":"MeringueSpectacularAPIView","text":"<p>               Bases: <code>SpectacularAPIView</code></p> <p>Spectacular wrapper that patches the schema.</p>"},{"location":"reference/meringue/api/docs/__init__/#meringue.api.docs.MeringueSpectacularAPIView.patch_schema","title":"patch_schema","text":"<pre><code>patch_schema(openapi_schema: dict)\n</code></pre> <p>Method patching OpenAPI3 object.</p> <p>Attributes:</p> <ul> <li> <code>openapi_schema</code>           \u2013            <p>OpenAPI Object.</p> </li> </ul> Source code in <code>meringue/api/docs/views.py</code> <pre><code>def patch_schema(self, openapi_schema: dict):\n    \"\"\"\n    Method patching OpenAPI3 object.\n\n    Attributes:\n        openapi_schema: OpenAPI Object.\n    \"\"\"\n\n    if self.patcher:\n        self.patcher.patch_schema(openapi_schema)\n</code></pre>"},{"location":"reference/meringue/api/docs/patchers/","title":"patchers.py","text":""},{"location":"reference/meringue/api/docs/patchers/#meringue.api.docs.patchers","title":"meringue.api.docs.patchers","text":""},{"location":"reference/meringue/api/docs/patchers/#meringue.api.docs.patchers.OpenAPISchemaPatcher","title":"OpenAPISchemaPatcher","text":"<pre><code>OpenAPISchemaPatcher()\n</code></pre> <p>OpenApi3 patcher.</p> <p>https://swagger.io/specification/</p> <p>Info</p> <p><code>json.loads</code> -&gt; <code>json.dumps</code> - for render locale <code>__proxy__</code> (e.g. <code>gettext_lazy</code>)</p> Source code in <code>meringue/api/docs/patchers.py</code> <pre><code>def __init__(self):\n    self._security_schemes = {}\n    self._components_schemes = {}\n    self._tags_schemes = {}\n</code></pre>"},{"location":"reference/meringue/api/docs/patchers/#meringue.api.docs.patchers.OpenAPISchemaPatcher.register_security_scheme","title":"register_security_scheme","text":"<pre><code>register_security_scheme(name: str, scheme: dict)\n</code></pre> <p>Register security scheme.</p> <p>Attributes:</p> <ul> <li> <code>name</code>           \u2013            <p>Security scheme name.</p> </li> <li> <code>scheme</code>           \u2013            <p>Security scheme in Security Scheme Object or Reference Object format.</p> </li> </ul> <p>Raises:</p> <ul> <li> <code>Exception</code>             \u2013            <p>Security scheme already registered.</p> </li> </ul> Source code in <code>meringue/api/docs/patchers.py</code> <pre><code>def register_security_scheme(self, name: str, scheme: dict):\n    \"\"\"\n    Register security scheme.\n\n    Attributes:\n        name: Security scheme name.\n        scheme: Security scheme in [Security Scheme Object](https://swagger.io/specification/#s\n            ecurity-scheme-object) or [Reference Object format](https://swagger.io/specificatio\n            n/#reference-object).\n\n    Raises:\n        Exception: Security scheme already registered.\n    \"\"\"\n\n    if name in self._security_schemes:\n        msg = f\"Security scheme named `{name}` is already registered\"\n        raise Exception(msg)\n\n    self._security_schemes[name] = scheme\n</code></pre>"},{"location":"reference/meringue/api/docs/patchers/#meringue.api.docs.patchers.OpenAPISchemaPatcher.register_component_scheme","title":"register_component_scheme","text":"<pre><code>register_component_scheme(name: str, scheme: dict)\n</code></pre> <p>Register components scheme.</p> <p>Attributes:</p> <ul> <li> <code>name</code>           \u2013            <p>Component name.</p> </li> <li> <code>schema</code>           \u2013            <p>Formatted Component schema object.</p> </li> </ul> <p>Raises:</p> <ul> <li> <code>Exception</code>             \u2013            <p>Scheme is already registered.</p> </li> </ul> Source code in <code>meringue/api/docs/patchers.py</code> <pre><code>def register_component_scheme(self, name: str, scheme: dict):\n    \"\"\"\n    Register components scheme.\n\n    Attributes:\n        name: Component name.\n        schema: [Formatted](https://swagger.io/specification/#schema-object) Component schema\n            object.\n\n    Raises:\n        Exception: Scheme is already registered.\n    \"\"\"\n\n    if name in self._components_schemes:\n        msg = f\"Component named `{name}` is already registered\"\n        raise Exception(msg)\n\n    self._components_schemes[name] = scheme\n</code></pre>"},{"location":"reference/meringue/api/docs/patchers/#meringue.api.docs.patchers.OpenAPISchemaPatcher.register_tag","title":"register_tag","text":"<pre><code>register_tag(scheme: dict)\n</code></pre> <p>Register tag.</p> <p>Attributes:</p> <ul> <li> <code>scheme</code>           \u2013            <p>Tag scheme object.</p> </li> </ul> <p>Raises:</p> <ul> <li> <code>Exception</code>             \u2013            <p>Tag is already registered.</p> </li> </ul> Source code in <code>meringue/api/docs/patchers.py</code> <pre><code>def register_tag(self, scheme: dict):\n    \"\"\"\n    Register tag.\n\n    Attributes:\n        scheme: [Tag scheme object](https://swagger.io/specification/#tag-object).\n\n    Raises:\n        Exception: Tag is already registered.\n    \"\"\"\n    name = scheme[\"name\"]\n\n    if name in self._tags_schemes:\n        msg = f\"A tag named `{name}` is already registered\"\n        raise Exception(msg)\n\n    self._tags_schemes[name] = scheme\n</code></pre>"},{"location":"reference/meringue/api/docs/patchers/#meringue.api.docs.patchers.OpenAPISchemaPatcher.patch_description","title":"patch_description","text":"<pre><code>patch_description(openapi_schema: dict)\n</code></pre> <p>Adds a list of servers from the openapi schema source servers to the description.</p> <p>This method adds to the end of the description a list of servers that it takes from the corresponding section of the openapi schema.</p> <p>Attributes:</p> <ul> <li> <code>openapi_schema</code>           \u2013            <p>OpenAPI Object.</p> </li> </ul> Source code in <code>meringue/api/docs/patchers.py</code> <pre><code>def patch_description(self, openapi_schema: dict):\n    \"\"\"\n    Adds a list of servers from the openapi schema source servers to the description.\n\n    This method adds to the end of the description a list of servers that it takes from the\n    [corresponding section](https://swagger.io/specification/#server-object) of the openapi\n    schema.\n\n    Attributes:\n        openapi_schema: OpenAPI Object.\n    \"\"\"\n\n    if not openapi_schema.get(\"servers\", []):\n        return\n\n    openapi_schema.setdefault(\"info\", {})\n    openapi_schema[\"info\"].setdefault(\"description\", \"\")\n\n    for server in openapi_schema[\"servers\"]:\n        name = server[\"description\"]\n        full_url = server[\"url\"]\n        clear_url = full_url.split(\"://\")[1] if \"://\" in full_url else full_url\n        if openapi_schema[\"info\"][\"description\"]:\n            openapi_schema[\"info\"][\"description\"] += \"\\n\\n\"\n        openapi_schema[\"info\"][\"description\"] += f\"{name} API: [{clear_url}]({full_url})\"\n</code></pre>"},{"location":"reference/meringue/api/docs/patchers/#meringue.api.docs.patchers.OpenAPISchemaPatcher.patch_security_schemes","title":"patch_security_schemes","text":"<pre><code>patch_security_schemes(openapi_schema: dict)\n</code></pre> <p>Adds registered security schemes to the openapi schema.</p> <p>Attributes:</p> <ul> <li> <code>openapi_schema</code>           \u2013            <p>OpenAPI Object.</p> </li> </ul> <p>Raises:</p> <ul> <li> <code>Exception</code>             \u2013            <p>Security scheme already registered.</p> </li> </ul> Source code in <code>meringue/api/docs/patchers.py</code> <pre><code>def patch_security_schemes(self, openapi_schema: dict):\n    \"\"\"\n    Adds registered security schemes to the openapi schema.\n\n    Attributes:\n        openapi_schema: OpenAPI Object.\n\n    Raises:\n        Exception: Security scheme already registered.\n    \"\"\"\n\n    if not self._security_schemes:\n        return\n\n    openapi_schema.setdefault(\"components\", {})\n    openapi_schema[\"components\"].setdefault(\"securitySchemes\", {})\n\n    tmp_schemes = json.loads(json.dumps(self._security_schemes, cls=DjangoJSONEncoder))\n\n    for name, schema in tmp_schemes.items():\n        if name in openapi_schema[\"components\"][\"securitySchemes\"]:\n            msg = f\"Security scheme named `{name}` exists in the original schema\"\n            raise Exception(msg)\n\n        openapi_schema[\"components\"][\"securitySchemes\"][name] = schema\n</code></pre>"},{"location":"reference/meringue/api/docs/patchers/#meringue.api.docs.patchers.OpenAPISchemaPatcher.patch_component_schemes","title":"patch_component_schemes","text":"<pre><code>patch_component_schemes(openapi_schema: dict)\n</code></pre> <p>Adds registered components schemas to the openapi schema.</p> <p>Attributes:</p> <ul> <li> <code>openapi_schema</code>           \u2013            <p>OpenAPI Object.</p> </li> </ul> <p>Raises:</p> <ul> <li> <code>Exception</code>             \u2013            <p>Component schema is already registered.</p> </li> </ul> Source code in <code>meringue/api/docs/patchers.py</code> <pre><code>def patch_component_schemes(self, openapi_schema: dict):\n    \"\"\"\n    Adds registered components schemas to the openapi schema.\n\n    Attributes:\n        openapi_schema: OpenAPI Object.\n\n    Raises:\n        Exception: Component schema is already registered.\n    \"\"\"\n\n    if not self._components_schemes:\n        return\n\n    openapi_schema.setdefault(\"components\", {})\n    openapi_schema[\"components\"].setdefault(\"schemas\", {})\n\n    tmp_components = json.loads(json.dumps(self._components_schemes, cls=DjangoJSONEncoder))\n\n    for name, schema in tmp_components.items():\n        if name in openapi_schema[\"components\"][\"schemas\"]:\n            msg = f\"Component named `{name}` exists in the original schema\"\n            raise Exception(msg)\n\n        openapi_schema[\"components\"][\"schemas\"][name] = schema\n</code></pre>"},{"location":"reference/meringue/api/docs/patchers/#meringue.api.docs.patchers.OpenAPISchemaPatcher.patch_tags","title":"patch_tags","text":"<pre><code>patch_tags(openapi_schema: dict)\n</code></pre> <p>Adds registered components schemas to the openapi schema.</p> <p>Attributes:</p> <ul> <li> <code>openapi_schema</code>           \u2013            <p>OpenAPI Object.</p> </li> </ul> <p>Raises:</p> <ul> <li> <code>Exception</code>             \u2013            <p>A tag exists in the original schema.</p> </li> </ul> Source code in <code>meringue/api/docs/patchers.py</code> <pre><code>def patch_tags(self, openapi_schema: dict):\n    \"\"\"\n    Adds registered components schemas to the openapi schema.\n\n    Attributes:\n        openapi_schema: OpenAPI Object.\n\n    Raises:\n        Exception: A tag exists in the original schema.\n    \"\"\"\n\n    if not self._tags_schemes:\n        return\n\n    openapi_schema.setdefault(\"tags\", [])\n    exists_tags_schemes = (t[\"name\"] for t in openapi_schema[\"tags\"])\n    tmp_tags = json.loads(json.dumps(self._tags_schemes, cls=DjangoJSONEncoder))\n\n    for name, schema in tmp_tags.items():\n        if name in exists_tags_schemes:\n            msg = f\"A tag named `{name}` exists in the original schema\"\n            raise Exception(msg)\n\n        openapi_schema[\"tags\"].append(schema)\n</code></pre>"},{"location":"reference/meringue/api/docs/patchers/#meringue.api.docs.patchers.OpenAPISchemaPatcher.patch_schema","title":"patch_schema","text":"<pre><code>patch_schema(openapi_schema: dict)\n</code></pre> <p>Fully patch the schema.</p> Source code in <code>meringue/api/docs/patchers.py</code> <pre><code>def patch_schema(self, openapi_schema: dict):\n    \"\"\"\n    Fully patch the schema.\n    \"\"\"\n    self.patch_description(openapi_schema)\n    self.patch_security_schemes(openapi_schema)\n    self.patch_component_schemes(openapi_schema)\n    self.patch_tags(openapi_schema)\n</code></pre>"},{"location":"reference/meringue/api/docs/views/","title":"views.py","text":""},{"location":"reference/meringue/api/docs/views/#meringue.api.docs.views","title":"meringue.api.docs.views","text":""},{"location":"reference/meringue/api/docs/views/#meringue.api.docs.views.MeringueSpectacularAPIView","title":"MeringueSpectacularAPIView","text":"<p>               Bases: <code>SpectacularAPIView</code></p> <p>Spectacular wrapper that patches the schema.</p>"},{"location":"reference/meringue/api/docs/views/#meringue.api.docs.views.MeringueSpectacularAPIView.patch_schema","title":"patch_schema","text":"<pre><code>patch_schema(openapi_schema: dict)\n</code></pre> <p>Method patching OpenAPI3 object.</p> <p>Attributes:</p> <ul> <li> <code>openapi_schema</code>           \u2013            <p>OpenAPI Object.</p> </li> </ul> Source code in <code>meringue/api/docs/views.py</code> <pre><code>def patch_schema(self, openapi_schema: dict):\n    \"\"\"\n    Method patching OpenAPI3 object.\n\n    Attributes:\n        openapi_schema: OpenAPI Object.\n    \"\"\"\n\n    if self.patcher:\n        self.patcher.patch_schema(openapi_schema)\n</code></pre>"},{"location":"reference/meringue/conf/__init__/","title":"__init__.py","text":""},{"location":"reference/meringue/conf/__init__/#meringue.conf","title":"meringue.conf","text":""},{"location":"reference/meringue/conf/__init__/#meringue.conf.SETTING_KEY","title":"SETTING_KEY  <code>module-attribute</code>","text":"<pre><code>SETTING_KEY: Final[str] = 'MERINGUE'\n</code></pre> <p>Parameter name in django settings for meringue settings.</p> <p>Examples:</p> settings.py<pre><code>MERINGUE = {\n    \"FRONTEND_URL\": \"http://meringue.local:9000/\",\n}\n</code></pre>"},{"location":"reference/meringue/conf/__init__/#meringue.conf.DEPRECATED_PARAMS","title":"DEPRECATED_PARAMS  <code>module-attribute</code>","text":"<pre><code>DEPRECATED_PARAMS: Final[dict[str, str]] = {}\n</code></pre> <p>Dict with deprecated options and warning texts for them.</p> <p>Examples:</p> <pre><code>DEPRECATED_PARAMS = {\n    \"PROTOCOL\": \"The `PROTOCOL` option is deprecated, use `BACKEND_PROTOCOL` instead.\",\n}\n</code></pre>"},{"location":"reference/meringue/conf/__init__/#meringue.conf.PARAMS_TO_IMPORT","title":"PARAMS_TO_IMPORT  <code>module-attribute</code>","text":"<pre><code>PARAMS_TO_IMPORT: Final[list[str]] = [\n    \"UPLOAD_RENAME_HANDLER\",\n    \"THUMBNAIL_GENERATOR_CLASS\",\n    \"THUMBNAIL_STORAGE_GETTER\",\n    \"THUMBNAIL_IMAGE_CLASS\",\n    \"THUMBNAIL_PROPERTIES\",\n    \"THUMBNAIL_ACTIONS\",\n    \"PROTECTED_NGINX_LOCATION_GETTER\",\n]\n</code></pre> <p>List of options that contain the path to the module and must be imported.</p> <p>Examples:</p> <pre><code>PARAMS_TO_IMPORT = [\n    \"UPLOAD_RENAME_HANDLER\",\n]\n</code></pre>"},{"location":"reference/meringue/conf/__init__/#meringue.conf.import_list","title":"import_list","text":"<pre><code>import_list(path_list: list[str]) -&gt; list[Any]\n</code></pre> <p>Import a list of dotted modules.</p> <p>Attributes:</p> <ul> <li> <code>path_list</code>           \u2013            <p>List of dotted paths.</p> </li> </ul> <p>Raises:</p> <ul> <li> <code>TypeError</code>             \u2013            <p>Wrong dotted path data type for import.</p> </li> <li> <code>ImportError</code>             \u2013            <p>Import error.</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>list[Any]</code>           \u2013            <p>List of imported attributes/classes.</p> </li> </ul> Source code in <code>meringue/conf/__init__.py</code> <pre><code>def import_list(path_list: list[str]) -&gt; list[Any]:\n    \"\"\"\n    Import a list of dotted modules.\n\n    Attributes:\n        path_list: List of dotted paths.\n\n    Raises:\n        TypeError: Wrong dotted path data type for import.\n        ImportError: Import error.\n\n    Returns:\n        List of imported attributes/classes.\n    \"\"\"\n\n    result = []\n\n    for dotted_path in path_list:\n        if not isinstance(dotted_path, str):\n            msg = f\"`{type(dotted_path).__name__}` data type is not supported for import.\"\n            raise TypeError(msg, dotted_path)\n\n        try:\n            result.append(import_string(dotted_path))\n        except ImportError as err:\n            msg = f\"`{dotted_path}` import error.\"\n            raise ImportError(msg, path=dotted_path) from err\n\n    return result\n</code></pre>"},{"location":"reference/meringue/conf/__init__/#meringue.conf.import_dict","title":"import_dict","text":"<pre><code>import_dict(path_dict: dict[str, str]) -&gt; dict[str, Any]\n</code></pre> <p>Import a dictionary with dotted path as key value.</p> <p>Attributes:</p> <ul> <li> <code>path_dict</code>           \u2013            <p>Dictionary with dotted path as key value.</p> </li> </ul> <p>Raises:</p> <ul> <li> <code>TypeError</code>             \u2013            <p>Wrong dotted path data type for import.</p> </li> <li> <code>ImportError</code>             \u2013            <p>Import error.</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>dict[str, Any]</code>           \u2013            <p>Dict with imported attributes/classes as key value.</p> </li> </ul> Source code in <code>meringue/conf/__init__.py</code> <pre><code>def import_dict(path_dict: dict[str, str]) -&gt; dict[str, Any]:\n    \"\"\"\n    Import a dictionary with dotted path as key value.\n\n    Attributes:\n        path_dict: Dictionary with dotted path as key value.\n\n    Raises:\n        TypeError: Wrong dotted path data type for import.\n        ImportError: Import error.\n\n    Returns:\n        Dict with imported attributes/classes as key value.\n    \"\"\"\n\n    result = {}\n\n    for key, dotted_path in path_dict.items():\n        if not isinstance(dotted_path, str):\n            msg = f\"`{type(dotted_path).__name__}` data type is not supported for import.\"\n            raise TypeError(msg, dotted_path)\n\n        try:\n            result[key] = import_string(dotted_path)\n        except ImportError as err:\n            msg = f\"`{dotted_path}` import error.\"\n            raise ImportError(msg, path=dotted_path) from err\n\n    return result\n</code></pre>"},{"location":"reference/meringue/conf/__init__/#meringue.conf.import_parameter","title":"import_parameter","text":"<pre><code>import_parameter(\n    value: str | list[str] | dict[str, str]\n) -&gt; Any | list[Any] | dict[str, Any]\n</code></pre> <p>Method for importing modules in settings parameter.</p> <p>Attributes:</p> <ul> <li> <code>value</code>           \u2013            <p>Settings parameter value to import.</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>Any | list[Any] | dict[str, Any]</code>           \u2013            <p>Imported parameter.</p> </li> </ul> Source code in <code>meringue/conf/__init__.py</code> <pre><code>def import_parameter(value: str | list[str] | dict[str, str]) -&gt; Any | list[Any] | dict[str, Any]:\n    \"\"\"\n    Method for importing modules in settings parameter.\n\n    Attributes:\n        value: Settings parameter value to import.\n\n    Returns:\n        Imported parameter.\n    \"\"\"\n\n    if isinstance(value, str):\n        try:\n            return import_string(value)\n        except ImportError as err:\n            msg = f\"`{value}` import error.\"\n            raise ImportError(msg, path=value) from err\n\n    if isinstance(value, list):\n        return import_list(value)\n\n    if isinstance(value, dict):\n        return import_dict(value)\n\n    msg = f\"`{type(value).__name__}` data type is not supported for import.\"\n    raise TypeError(msg, value)\n</code></pre>"},{"location":"reference/meringue/conf/__init__/#meringue.conf.Settings","title":"Settings","text":"<pre><code>Settings(\n    setting_key: str,\n    defaults: dict[str, str],\n    deprecated_params: dict[str, str] | None = None,\n    params_to_impoprt: list[str] | None = None,\n)\n</code></pre> <p>A settings object.</p> <p>The settings are obtained from the django settings by the name of the key which should contain an object with all the application settings.</p> <p>Attributes:</p> <ul> <li> <code>setting_key</code>           \u2013            <p>Settings key in django settings list.</p> </li> <li> <code>defaults</code>           \u2013            <p>Dict with default parameter values. Used as a list of available settings.</p> </li> <li> <code>deprecated_params</code>           \u2013            <p>Dict with deprecated options and warning texts for them.</p> </li> <li> <code>params_to_impoprt</code>           \u2013            <p>List of options that contain the path to the module and must be imported.</p> </li> </ul> Source code in <code>meringue/conf/__init__.py</code> <pre><code>def __init__(\n    self,\n    setting_key: str,\n    defaults: dict[str, str],\n    deprecated_params: dict[str, str] | None = None,\n    params_to_impoprt: list[str] | None = None,\n):\n    \"\"\"\n    Attributes:\n        setting_key: Settings key in django settings list.\n        defaults: Dict with default parameter values. Used as a list of available settings.\n        deprecated_params: Dict with deprecated options and warning texts for them.\n        params_to_impoprt: List of options that contain the path to the module and must be\n            imported.\n    \"\"\"\n\n    self.setting_key = setting_key\n    if isinstance(defaults, ModuleType):\n        self.defaults = {}\n        for key in dir(defaults):\n            if key.isupper():\n                self.defaults[key] = getattr(defaults, key)\n    else:\n        self.defaults = defaults\n    self.deprecated_params = deprecated_params or {}\n    self.params_to_impoprt = params_to_impoprt or []\n    self._cached_attrs = set()\n    self.reset()\n</code></pre>"},{"location":"reference/meringue/conf/__init__/#meringue.conf.Settings.__getattr__","title":"__getattr__","text":"<pre><code>__getattr__(attr: str) -&gt; Any\n</code></pre> <p>Gets the parameter value and caches it in the attributes of the settings object.</p> <p>Attributes:</p> <ul> <li> <code>attr</code>           \u2013            <p>Setting parameter name.</p> </li> </ul> <p>Raises:</p> <ul> <li> <code>AttributeError</code>             \u2013            <p>Error when trying to get an unregistered parameter.</p> </li> </ul> <p>Warns:</p> <ul> <li> <code>DeprecationWarning</code>             \u2013            <p>A warning that the parameter is deprecated.</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>Any</code>           \u2013            <p>Setting value.</p> </li> </ul> Source code in <code>meringue/conf/__init__.py</code> <pre><code>def __getattr__(self, attr: str) -&gt; Any:\n    \"\"\"\n    Gets the parameter value and caches it in the attributes of the settings object.\n\n    Attributes:\n        attr: Setting parameter name.\n\n    Raises:\n        AttributeError: Error when trying to get an unregistered parameter.\n\n    Warns:\n        DeprecationWarning: A warning that the parameter is deprecated.\n\n    Returns:\n        Setting value.\n    \"\"\"\n\n    if attr not in self.defaults:\n        msg = f\"Invalid setting key: '{attr}'\"\n        raise AttributeError(msg)\n\n    if attr in self.deprecated_params:\n        warnings.warn(self.deprecated_params[attr], DeprecationWarning, stacklevel=2)\n\n    val = self.user_params.get(attr, self.defaults[attr])\n\n    if attr in self.params_to_impoprt:\n        try:\n            val = import_parameter(val)\n\n        except ImportError as err:\n            msg = f\"Error importing `{err.path}` attribute/class in `{attr}` parameter.\"\n            raise ImportError(msg) from err\n\n        except TypeError as err:\n            msg = (\n                f\"The `{err.args[1]}` value of the `{attr}` parameter is not available for \"\n                \"import.\"\n            )\n            raise TypeError(msg) from None\n\n    self._cached_attrs.add(attr)\n    setattr(self, attr, val)\n    return val\n</code></pre>"},{"location":"reference/meringue/conf/__init__/#meringue.conf.Settings.reset","title":"reset","text":"<pre><code>reset()\n</code></pre> <p>Reset downloaded settings, as well as clearing the cache.</p> Source code in <code>meringue/conf/__init__.py</code> <pre><code>def reset(self):\n    \"\"\"\n    Reset downloaded settings, as well as clearing the cache.\n    \"\"\"\n\n    for attr in self._cached_attrs:\n        delattr(self, attr)\n    self._cached_attrs = set()\n    self.user_params = getattr(settings, self.setting_key, {})\n</code></pre>"},{"location":"reference/meringue/conf/__init__/#meringue.conf.reset_settings","title":"reset_settings","text":"<pre><code>reset_settings(*args, **kwargs)\n</code></pre> <p>Settings change signal handler.</p> Source code in <code>meringue/conf/__init__.py</code> <pre><code>@receiver(setting_changed)\ndef reset_settings(*args, **kwargs):\n    \"\"\"\n    Settings change signal handler.\n    \"\"\"\n\n    if kwargs[\"setting\"] == SETTING_KEY:\n        m_settings.reset()\n</code></pre>"},{"location":"reference/meringue/conf/default_settings/","title":"default_settings.py","text":""},{"location":"reference/meringue/conf/default_settings/#meringue.conf.default_settings","title":"meringue.conf.default_settings","text":""},{"location":"reference/meringue/conf/default_settings/#meringue.conf.default_settings.UPLOAD_RENAME_HANDLER","title":"UPLOAD_RENAME_HANDLER  <code>module-attribute</code>","text":"<pre><code>UPLOAD_RENAME_HANDLER: Final[str] = (\n    \"meringue.core.upload_handlers.rename_handler\"\n)\n</code></pre> <p>Path to method for renaming images on upload</p>"},{"location":"reference/meringue/conf/default_settings/#meringue.conf.default_settings.COP_YEAR","title":"COP_YEAR  <code>module-attribute</code>","text":"<pre><code>COP_YEAR: Final[int] = None\n</code></pre> <p>Project start year for the copyright tag</p>"},{"location":"reference/meringue/conf/default_settings/#meringue.conf.default_settings.COP_YEARS_DIFF","title":"COP_YEARS_DIFF  <code>module-attribute</code>","text":"<pre><code>COP_YEARS_DIFF: Final[int] = 10\n</code></pre> <p>Difference in years for which it is necessary to display the range of years</p> <p>Specify 1 to display the period for the second year.</p>"},{"location":"reference/meringue/conf/default_settings/#meringue.conf.default_settings.CRYPTO_KEY","title":"CRYPTO_KEY  <code>module-attribute</code>","text":"<pre><code>CRYPTO_KEY: Final[str] = SECRET_KEY[:32]\n</code></pre> <p>Encryption key</p>"},{"location":"reference/meringue/conf/default_settings/#meringue.conf.default_settings.FRONTEND_URLS","title":"FRONTEND_URLS  <code>module-attribute</code>","text":"<pre><code>FRONTEND_URLS: Final[dict] = None\n</code></pre> <p>A dict of links to the frontend</p>"},{"location":"reference/meringue/conf/default_settings/#meringue.conf.default_settings.FRONTEND_DOMAIN","title":"FRONTEND_DOMAIN  <code>module-attribute</code>","text":"<pre><code>FRONTEND_DOMAIN: Final[str] = None\n</code></pre> <p>Domain for generating absolute links</p>"},{"location":"reference/meringue/conf/default_settings/#meringue.conf.default_settings.API_ENABLE_ROOT_VIEW","title":"API_ENABLE_ROOT_VIEW  <code>module-attribute</code>","text":"<pre><code>API_ENABLE_ROOT_VIEW: Final[bool] = DEBUG\n</code></pre> <p>Option to enable or disable the root view of the Router</p>"},{"location":"reference/meringue/conf/default_settings/#meringue.conf.default_settings.THUMBNAIL_GENERATOR_CLASS","title":"THUMBNAIL_GENERATOR_CLASS  <code>module-attribute</code>","text":"<pre><code>THUMBNAIL_GENERATOR_CLASS: Final[str] = (\n    \"meringue.thumbnail.generators.Thumbnailer\"\n)\n</code></pre> <p>Thumbnail generator class.</p>"},{"location":"reference/meringue/conf/default_settings/#meringue.conf.default_settings.THUMBNAIL_STORAGE_GETTER","title":"THUMBNAIL_STORAGE_GETTER  <code>module-attribute</code>","text":"<pre><code>THUMBNAIL_STORAGE_GETTER: Final[str] = (\n    \"meringue.thumbnail.storage.get_storage\"\n)\n</code></pre> <p>Dotted path to a method that returns a store.</p>"},{"location":"reference/meringue/conf/default_settings/#meringue.conf.default_settings.THUMBNAIL_IMAGE_CLASS","title":"THUMBNAIL_IMAGE_CLASS  <code>module-attribute</code>","text":"<pre><code>THUMBNAIL_IMAGE_CLASS: Final[str] = (\n    \"meringue.thumbnail.images.ThumbnailImage\"\n)\n</code></pre> <p>Thumbnail image class.</p>"},{"location":"reference/meringue/conf/default_settings/#meringue.conf.default_settings.THUMBNAIL_DIR","title":"THUMBNAIL_DIR  <code>module-attribute</code>","text":"<pre><code>THUMBNAIL_DIR: Final[Path] = Path(MEDIA_ROOT) / Path(\n    \"m/thumbnail\"\n)\n</code></pre> <p>Directory for saving thhumbnails.</p>"},{"location":"reference/meringue/conf/default_settings/#meringue.conf.default_settings.THUMBNAIL_URL","title":"THUMBNAIL_URL  <code>module-attribute</code>","text":"<pre><code>THUMBNAIL_URL: Final[str] = urljoin(\n    MEDIA_URL, \"m/thumbnail\"\n)\n</code></pre> <p>Url where thumbnails will be available.</p>"},{"location":"reference/meringue/conf/default_settings/#meringue.conf.default_settings.THUMBNAIL_SAVE_PARAMS_BY_FORMAT","title":"THUMBNAIL_SAVE_PARAMS_BY_FORMAT  <code>module-attribute</code>","text":"<pre><code>THUMBNAIL_SAVE_PARAMS_BY_FORMAT: Final[dict[str, dict]] = {\n    \"GIF\": {\"optimize\": True},\n    \"JPEG\": {\"quality\": 85, \"optimize\": True},\n    \"PNG\": {\"optimize\": True, \"compress_level\": 5},\n    \"TIFF\": {\"quality\": 85},\n    \"WEBP\": {\"quality\": 85},\n}\n</code></pre> <p>List of default options for saving thumbnails images by format.</p>"},{"location":"reference/meringue/conf/default_settings/#meringue.conf.default_settings.THUMBNAIL_DEFAULT_FORMAT","title":"THUMBNAIL_DEFAULT_FORMAT  <code>module-attribute</code>","text":"<pre><code>THUMBNAIL_DEFAULT_FORMAT: Final[str] = 'PNG'\n</code></pre> <p>Default thumbnail image format.</p>"},{"location":"reference/meringue/conf/default_settings/#meringue.conf.default_settings.PROTECTED_SERVE_WITH_NGINX","title":"PROTECTED_SERVE_WITH_NGINX  <code>module-attribute</code>","text":"<pre><code>PROTECTED_SERVE_WITH_NGINX: Final[bool] = not DEBUG\n</code></pre> <p>The option implies the distribution of protected files by nginx. Instead of serving the file in response.</p> <p>The view x_accel_redirect_view adds the X-Accel-Redirect header with a link to the file.</p>"},{"location":"reference/meringue/conf/default_settings/#meringue.conf.default_settings.PROTECTED_NGINX_LOCATION_GETTER","title":"PROTECTED_NGINX_LOCATION_GETTER  <code>module-attribute</code>","text":"<pre><code>PROTECTED_NGINX_LOCATION_GETTER: Final[str] = (\n    \"meringue.protected.utils.nginx_location_getter\"\n)\n</code></pre> <p>Default getter for the link to the file where nginx should serve it after access verification.</p>"},{"location":"reference/meringue/core/__init__/","title":"__init__.py","text":""},{"location":"reference/meringue/core/__init__/#meringue.core","title":"meringue.core","text":""},{"location":"reference/meringue/core/apps/","title":"apps.py","text":""},{"location":"reference/meringue/core/apps/#meringue.core.apps","title":"meringue.core.apps","text":""},{"location":"reference/meringue/core/db/","title":"db.py","text":""},{"location":"reference/meringue/core/db/#meringue.core.db","title":"meringue.core.db","text":""},{"location":"reference/meringue/core/db/#meringue.core.db.PgAdvisoryLock","title":"PgAdvisoryLock","text":"<pre><code>PgAdvisoryLock(\n    lock_id: int | str,\n    namespace_id: int | str | None = None,\n    using: str = \"default\",\n)\n</code></pre> <p>PostgreSQL advisory lock for Django projects.</p> <p>This utility provides a context manager and decorator for safely acquiring PostgreSQL advisory locks based on either a single integer key or a (namespace, key) pair.</p> Supports both <ul> <li><code>pg_advisory_lock(key)</code>            \u2014 if only <code>lock_id</code> is provided</li> <li><code>pg_advisory_lock(namespace, key)</code> \u2014 if <code>namespace_id</code> is also provided</li> </ul> <p>Example usage:</p> <pre><code>with PgAdvisoryLock(\"user_42\", namespace_id=\"payment\"):\n    # Critical section here...\n    ...\n\n@PgAdvisoryLock(12345)\ndef process_transfer():\n</code></pre> <p>Note</p> <p>If the database is not PostgreSQL, the lock will not be applied. A warning will be issued, but the function or block will still execute normally.</p> <p>Note</p> <p>If you pass strings for lock_id or namespace_id, they will be hashed to 32-bit signed ints using CRC32. Locks persist until manually released or until the DB session ends.</p> <p>Parameters:</p> <ul> <li> <code>lock_id</code>               (<code>int | str</code>)           \u2013            <p>Unique identifier for the resource to be locked. Strings are hashed to a 32-bit signed integer.</p> </li> <li> <code>namespace_id</code>               (<code>int | str | None</code>, default:                   <code>None</code> )           \u2013            <p>Optional namespace (e.g. table name or resource type) to avoid key collisions. Also hashed if passed as a string.</p> </li> <li> <code>using</code>               (<code>str</code>, default:                   <code>'default'</code> )           \u2013            <p>Django database alias.</p> </li> </ul> Source code in <code>meringue/core/db.py</code> <pre><code>def __init__(\n    self,\n    lock_id: int | str,\n    namespace_id: int | str | None = None,\n    using: str = \"default\",\n):\n    \"\"\"\n    Args:\n        lock_id: Unique identifier for the resource to be locked.\n            Strings are hashed to a 32-bit signed integer.\n        namespace_id: Optional namespace (e.g. table name or resource type)\n            to avoid key collisions. Also hashed if passed as a string.\n        using: Django database alias.\n    \"\"\"\n\n    self.lock_id = lock_id\n    self.namespace_id = namespace_id\n    self.db_name = using\n    self.is_postgresql = self._check_postgresql()\n    self.__stacklevel = 2\n</code></pre>"},{"location":"reference/meringue/core/db/#meringue.core.db.PgAdvisoryLock.int_lock_id","title":"int_lock_id  <code>cached</code> <code>property</code>","text":"<pre><code>int_lock_id: int\n</code></pre> <p>Returns the integer form of <code>lock_id</code>, applying CRC32 hash if it's a string.</p> <p>Returns:</p> <ul> <li> <code>int</code>           \u2013            <p>32-bit signed integer key for pg_advisory_lock.</p> </li> </ul>"},{"location":"reference/meringue/core/db/#meringue.core.db.PgAdvisoryLock.int_namespace_id","title":"int_namespace_id  <code>cached</code> <code>property</code>","text":"<pre><code>int_namespace_id: int | None\n</code></pre> <p>Returns the integer form of <code>namespace_id</code>, applying CRC32 hash if it's a string.</p> <p>Returns:</p> <ul> <li> <code>int | None</code>           \u2013            <p>Signed 32-bit integer or None if namespace is not set.</p> </li> </ul>"},{"location":"reference/meringue/core/db/#meringue.core.db.PgAdvisoryLock.lock","title":"lock","text":"<pre><code>lock() -&gt; None\n</code></pre> <p>Acquires the advisory lock.</p> Source code in <code>meringue/core/db.py</code> <pre><code>def lock(self) -&gt; None:\n    \"\"\"\n    Acquires the advisory lock.\n    \"\"\"\n\n    if not self.is_postgresql:\n        msg = \"pg_advisory_lock is only supported with PostgreSQL databases.\"\n        warnings.warn(msg, UserWarning, stacklevel=self.__stacklevel)\n        return\n\n    if self.namespace_id is None:\n        sql = \"SELECT pg_advisory_lock(%s)\"\n        args = [self.int_lock_id]\n    else:\n        sql = \"SELECT pg_advisory_lock(%s, %s)\"\n        args = [self.int_namespace_id, self.int_lock_id]\n\n    with connections[self.db_name].cursor() as cursor:\n        cursor.execute(sql, args)\n</code></pre>"},{"location":"reference/meringue/core/db/#meringue.core.db.PgAdvisoryLock.unlock","title":"unlock","text":"<pre><code>unlock() -&gt; None\n</code></pre> <p>Releases the advisory lock.</p> Source code in <code>meringue/core/db.py</code> <pre><code>def unlock(self) -&gt; None:\n    \"\"\"\n    Releases the advisory lock.\n    \"\"\"\n\n    if not self.is_postgresql:\n        return\n\n    if self.namespace_id is None:\n        sql = \"SELECT pg_advisory_unlock(%s)\"\n        args = [self.int_lock_id]\n    else:\n        sql = \"SELECT pg_advisory_unlock(%s, %s)\"\n        args = [self.int_namespace_id, self.int_lock_id]\n\n    with connections[self.db_name].cursor() as cursor:\n        cursor.execute(sql, args)\n</code></pre>"},{"location":"reference/meringue/core/models/","title":"models.py","text":""},{"location":"reference/meringue/core/models/#meringue.core.models","title":"meringue.core.models","text":""},{"location":"reference/meringue/core/models/#meringue.core.models.CMTimeMixin","title":"CMTimeMixin","text":"<p>               Bases: <code>Model</code></p> <p>A simple mixin to add ctime and mtime fields.</p>"},{"location":"reference/meringue/core/models/#meringue.core.models.SortingMixin","title":"SortingMixin","text":"<p>               Bases: <code>Model</code></p> <p>Simple mixin to add sorting field.</p>"},{"location":"reference/meringue/core/models/#meringue.core.models.PublicationMixin","title":"PublicationMixin","text":"<p>               Bases: <code>Model</code></p> <p>Mixin with the functionality of manual publishing.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; FooModel.object.published()\n&gt;&gt;&gt; FooModel.object.unpublished()\n</code></pre>"},{"location":"reference/meringue/core/models/#meringue.core.models.PublicationDatesMixin","title":"PublicationDatesMixin","text":"<p>               Bases: <code>Model</code></p> <p>Mixin with the functionality of publishing in a certain period.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; FooModel.object.published()\n&gt;&gt;&gt; FooModel.object.unpublished()\n</code></pre>"},{"location":"reference/meringue/core/options/","title":"options.py","text":""},{"location":"reference/meringue/core/options/#meringue.core.options","title":"meringue.core.options","text":""},{"location":"reference/meringue/core/query/","title":"query.py","text":""},{"location":"reference/meringue/core/query/#meringue.core.query","title":"meringue.core.query","text":""},{"location":"reference/meringue/core/query/#meringue.core.query.SortingQuerySet","title":"SortingQuerySet","text":"<p>               Bases: <code>QuerySet</code></p> <p>QuerySet with methods for working with sorted positions</p>"},{"location":"reference/meringue/core/query/#meringue.core.query.SortingQuerySet.correction_sorting","title":"correction_sorting","text":"<pre><code>correction_sorting()\n</code></pre> <p>This is a method to update/fix the sorting of the selected list of items.</p> <p>The sorting will be done according to the <code>queryset</code> sorting, so sorting can be controlled by executing <code>.order_by()</code> before calling the <code>correction_sorting</code> method.</p> <p>The selection for updating sorting can be pre-limited by filtering the list.</p> Source code in <code>meringue/core/query.py</code> <pre><code>def correction_sorting(self):\n    \"\"\"\n    This is a method to update/fix the sorting of the selected list of items.\n\n    The sorting will be done according to the `queryset` sorting, so sorting can be controlled\n    by executing `.order_by()` before calling the `correction_sorting` method.\n\n    The selection for updating sorting can be pre-limited by filtering the list.\n    \"\"\"\n    items = []\n    for sorting, item in enumerate(self):\n        if item.sorting != sorting:\n            item.sorting = sorting\n            items.append(item)\n\n    return self.bulk_update(items, [\"sorting\"])\n</code></pre>"},{"location":"reference/meringue/core/query/#meringue.core.query.PublicationQuerySet","title":"PublicationQuerySet","text":"<p>               Bases: <code>QuerySet</code></p> <p>QuerySet with methods for fetching published and unpublished elements.</p>"},{"location":"reference/meringue/core/query/#meringue.core.query.PublicationQuerySet.published","title":"published","text":"<pre><code>published(*args, **kwargs)\n</code></pre> <p>Method to getting published items.</p> Source code in <code>meringue/core/query.py</code> <pre><code>def published(self, *args, **kwargs):\n    \"\"\"\n    Method to getting published items.\n    \"\"\"\n    from meringue.core.models import PublicationDatesMixin\n    from meringue.core.models import PublicationMixin\n\n    if issubclass(self.model, PublicationMixin):\n        kwargs[\"is_published\"] = True\n\n    if issubclass(self.model, PublicationDatesMixin):\n        now = timezone.now()\n        args = (\n            *args,\n            Q(date_from__lte=now, date_to__gt=now)\n            | Q(date_from__isnull=True, date_to__gt=now)\n            | Q(date_from__lte=now, date_to__isnull=True)\n            | Q(date_from__isnull=True, date_to__isnull=True),\n        )\n\n    return self.filter(*args, **kwargs)\n</code></pre>"},{"location":"reference/meringue/core/query/#meringue.core.query.PublicationQuerySet.unpublished","title":"unpublished","text":"<pre><code>unpublished(*args, **kwargs)\n</code></pre> <p>Method for getting unpublished items.</p> Source code in <code>meringue/core/query.py</code> <pre><code>def unpublished(self, *args, **kwargs):\n    \"\"\"\n    Method for getting unpublished items.\n    \"\"\"\n    from meringue.core.models import PublicationDatesMixin\n    from meringue.core.models import PublicationMixin\n\n    if issubclass(self.model, PublicationMixin):\n        kwargs[\"is_published\"] = False\n\n    if issubclass(self.model, PublicationDatesMixin):\n        now = timezone.now()\n        args = (*args, Q(date_from__gt=now) | Q(date_to__lte=now))\n\n    return self.filter(*args, **kwargs)\n</code></pre>"},{"location":"reference/meringue/core/query/#meringue.core.query.UniversalQuerySet","title":"UniversalQuerySet","text":"<p>               Bases: <code>SortingQuerySet</code>, <code>PublicationQuerySet</code></p> <p>Generic QuerySet containing methods of all other QuerySets</p>"},{"location":"reference/meringue/core/translation/","title":"translation.py","text":""},{"location":"reference/meringue/core/translation/#meringue.core.translation","title":"meringue.core.translation","text":""},{"location":"reference/meringue/core/upload_handlers/","title":"upload_handlers.py","text":""},{"location":"reference/meringue/core/upload_handlers/#meringue.core.upload_handlers","title":"meringue.core.upload_handlers","text":""},{"location":"reference/meringue/core/upload_handlers/#meringue.core.upload_handlers.rename_handler","title":"rename_handler","text":"<pre><code>rename_handler(file_name: str) -&gt; str\n</code></pre> <p>Default method for renaming files when using load handlers MemoryFileUploadHandler and / or TemporaryFileUploadHandler.</p> <p>Attributes:</p> <ul> <li> <code>file_name</code>           \u2013            <p>Original file name.</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>str</code>           \u2013            <p>New file name.</p> </li> </ul> Source code in <code>meringue/core/upload_handlers.py</code> <pre><code>def rename_handler(file_name: str) -&gt; str:\n    \"\"\"\n    Default method for renaming files when using load handlers\n    [MemoryFileUploadHandler][meringue.core.upload_handlers.MemoryFileUploadHandler] and / or\n    [TemporaryFileUploadHandler][meringue.core.upload_handlers.TemporaryFileUploadHandler].\n\n    Attributes:\n        file_name: Original file name.\n\n    Returns:\n        New file name.\n    \"\"\"\n    return str(Path(file_name).with_stem(str(uuid.uuid4())))\n</code></pre>"},{"location":"reference/meringue/core/upload_handlers/#meringue.core.upload_handlers.MemoryFileUploadHandler","title":"MemoryFileUploadHandler","text":"<p>               Bases: <code>MemoryFileUploadHandler</code></p> <p>File upload handler to stream uploads into memory (used for small files).</p> <p>Examples:</p> settings.py<pre><code>FILE_UPLOAD_HANDLERS = (\n    'meringue.core.upload_handlers.MemoryFileUploadHandler',\n    'django.core.files.uploadhandler.TemporaryFileUploadHandler',\n)\n</code></pre>"},{"location":"reference/meringue/core/upload_handlers/#meringue.core.upload_handlers.TemporaryFileUploadHandler","title":"TemporaryFileUploadHandler","text":"<p>               Bases: <code>TemporaryFileUploadHandler</code></p> <p>Upload handler that streams data into a temporary file.</p> <p>Examples:</p> settings.py<pre><code>FILE_UPLOAD_HANDLERS = (\n    'django.core.files.uploadhandler.MemoryFileUploadHandler',\n    'meringue.core.upload_handlers.TemporaryFileUploadHandler',\n)\n</code></pre>"},{"location":"reference/meringue/core/views/","title":"views.py","text":""},{"location":"reference/meringue/core/views/#meringue.core.views","title":"meringue.core.views","text":""},{"location":"reference/meringue/core/views/#meringue.core.views.im_a_teapot","title":"im_a_teapot","text":"<pre><code>im_a_teapot(request)\n</code></pre> <p>We all at some point want to brew boiling water.</p> <p>Examples:</p> urls.py<pre><code>from django.urls import path\nfrom meringue.core.views import im_a_teapot\n\nurlpatterns = [\n    path('make_coffee', im_a_teapot, name=\"make_coffee\"),\n]\n</code></pre> Source code in <code>meringue/core/views.py</code> <pre><code>def im_a_teapot(request):\n    \"\"\"\n    We all at some point want to brew boiling water.\n\n    Examples:\n        ```py title=\"urls.py\"\n        from django.urls import path\n        from meringue.core.views import im_a_teapot\n\n        urlpatterns = [\n            path('make_coffee', im_a_teapot, name=\"make_coffee\"),\n        ]\n        ```\n    \"\"\"\n    return HttpResponse(status=418)\n</code></pre>"},{"location":"reference/meringue/core/templatetags/__init__/","title":"__init__.py","text":""},{"location":"reference/meringue/core/templatetags/__init__/#meringue.core.templatetags","title":"meringue.core.templatetags","text":""},{"location":"reference/meringue/core/templatetags/meringue_base/","title":"meringue_base.py","text":""},{"location":"reference/meringue/core/templatetags/meringue_base/#meringue.core.templatetags.meringue_base","title":"meringue.core.templatetags.meringue_base","text":""},{"location":"reference/meringue/core/templatetags/meringue_base/#meringue.core.templatetags.meringue_base.cop_year","title":"cop_year","text":"<pre><code>cop_year() -&gt; str\n</code></pre> <p>A tag that displays the year or range of years for the copyright string in <code>YYYY-YYYY</code> format.</p> <p>Examples:</p> <pre><code>&lt;p&gt;Copyright \u00a9 {% cop_year %} My company&lt;/p&gt;\n</code></pre> <p>Raises:</p> <ul> <li> <code>Exception</code>             \u2013            <p>To use the <code>cop_year</code> tag, you must fill in the <code>COP_YEAR</code> parameter in the meringue settings</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>str</code>           \u2013            <p>Year for copyrights.</p> </li> </ul> Source code in <code>meringue/core/templatetags/meringue_base.py</code> <pre><code>@register.simple_tag\ndef cop_year() -&gt; str:\n    \"\"\"\n    A tag that displays the year or range of years for the copyright string in `YYYY-YYYY` format.\n\n    Examples:\n        ```jinja\n        &lt;p&gt;Copyright \u00a9 {% cop_year %} My company&lt;/p&gt;\n        ```\n\n    Raises:\n        Exception: To use the `cop_year` tag, you must fill in the `COP_YEAR` parameter in the\n            meringue settings\n\n    Returns:\n        Year for copyrights.\n    \"\"\"\n\n    if m_settings.COP_YEAR is None:\n        msg = (\n            \"To use the `cop_year` tag, you must fill in the `COP_YEAR` parameter in the \"\n            \"meringue settings\"\n        )\n        raise Exception(msg)\n\n    year = timezone.localtime().year\n\n    if year == m_settings.COP_YEAR or year - m_settings.COP_YEAR &lt; m_settings.COP_YEARS_DIFF:\n        return year\n\n    return mark_safe(f\"{m_settings.COP_YEAR}&amp;mdash;{year}\")  # noqa: S308\n</code></pre>"},{"location":"reference/meringue/core/templatetags/meringue_base/#meringue.core.templatetags.meringue_base.date_range","title":"date_range","text":"<pre><code>date_range(date_start: date, date_end: date) -&gt; str\n</code></pre> <p>Return range of date in one of the following formats:</p> <ul> <li><code>DD.MM.YYYY - DD.MM.YYYY</code></li> <li><code>DD.MM - DD.MM.YYYY</code></li> <li><code>DD - DD.MM.YYYY</code></li> <li><code>DD.MM.YYYY</code></li> </ul> <p>Attributes:</p> <ul> <li> <code>date_start</code>           \u2013            <p>Period start date.</p> </li> <li> <code>date_end</code>           \u2013            <p>Period end date.</p> </li> </ul> <p>Examples:</p> <pre><code>{% date_range date_start date_end %}\n</code></pre> <p>Returns:</p> <ul> <li> <code>str</code>           \u2013            <p>Date period.</p> </li> </ul> Source code in <code>meringue/core/templatetags/meringue_base.py</code> <pre><code>@register.simple_tag\ndef date_range(date_start: dt.date, date_end: dt.date) -&gt; str:\n    \"\"\"\n    Return range of date in one of the following formats:\n\n    * `DD.MM.YYYY - DD.MM.YYYY`\n    * `DD.MM - DD.MM.YYYY`\n    * `DD - DD.MM.YYYY`\n    * `DD.MM.YYYY`\n\n    Attributes:\n        date_start: Period start date.\n        date_end: Period end date.\n\n    Examples:\n        ```jinja\n        {% date_range date_start date_end %}\n        ```\n\n    Returns:\n        Date period.\n    \"\"\"\n\n    tmp_result = format_date_from_to(date_start, date_end, \"-\")\n\n    if date_start == date_end:\n        return tmp_result\n\n    tmp_date_start, tmp_date_end = tmp_result.split(\" - \")\n\n    return mark_safe(f\"{tmp_date_start}&amp;nbsp;&amp;mdash; {tmp_date_end}\")  # noqa: S308\n</code></pre>"},{"location":"reference/meringue/core/utils/__init__/","title":"__init__.py","text":""},{"location":"reference/meringue/core/utils/__init__/#meringue.core.utils","title":"meringue.core.utils","text":""},{"location":"reference/meringue/core/utils/__init__/#meringue.core.utils.format_date_from_to","title":"format_date_from_to","text":"<pre><code>format_date_from_to(\n    date_start: date, date_end: date, delimiter: str = \"-\"\n) -&gt; str\n</code></pre> <p>Method to display date period.</p> <p>Possible output formats depending on the input data:</p> <ul> <li><code>DD.MM.YYYY - DD.MM.YYYY</code></li> <li><code>DD.MM - DD.MM.YYYY</code></li> <li><code>DD - DD.MM.YYYY</code></li> <li><code>DD.MM.YYYY</code></li> </ul> <p>Examples:</p> <pre><code>&gt;&gt;&gt; print(format_date_from_to(dt.date(2020, 1, 1), dt.date(2020, 2, 1)))\n01.01 - 01.02.2020\n</code></pre> <p>Attributes:</p> <ul> <li> <code>date_start</code>           \u2013            <p>Period start date.</p> </li> <li> <code>date_end</code>           \u2013            <p>Period end date.</p> </li> <li> <code>delimiter</code>           \u2013            <p>Dates delimiter.</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>str</code>           \u2013            <p>Date period string.</p> </li> </ul> Source code in <code>meringue/core/utils/datetime.py</code> <pre><code>def format_date_from_to(\n    date_start: dt.date,\n    date_end: dt.date,\n    delimiter: str = \"-\",\n) -&gt; str:\n    \"\"\"\n    Method to display date period.\n\n    Possible output formats depending on the input data:\n\n    * `DD.MM.YYYY - DD.MM.YYYY`\n    * `DD.MM - DD.MM.YYYY`\n    * `DD - DD.MM.YYYY`\n    * `DD.MM.YYYY`\n\n    Examples:\n        ```pycon\n        &gt;&gt;&gt; print(format_date_from_to(dt.date(2020, 1, 1), dt.date(2020, 2, 1)))\n        01.01 - 01.02.2020\n        ```\n\n    Attributes:\n        date_start: Period start date.\n        date_end: Period end date.\n        delimiter: Dates delimiter.\n\n    Returns:\n        Date period string.\n    \"\"\"\n\n    if date_start.year != date_end.year:\n        return f\"{date_start:%d.%m.%Y} {delimiter} {date_end:%d.%m.%Y}\"\n\n    if date_start.month != date_end.month:\n        return f\"{date_start:%d.%m} {delimiter} {date_end:%d.%m.%Y}\"\n\n    if date_start.day != date_end.day:\n        return f\"{date_start:%d} {delimiter} {date_end:%d.%m.%Y}\"\n\n    return f\"{date_end:%d.%m.%Y}\"\n</code></pre>"},{"location":"reference/meringue/core/utils/__init__/#meringue.core.utils.get_link","title":"get_link","text":"<pre><code>get_link(\n    url_name: str, absolute: bool | None = True, **kwargs\n) -&gt; str\n</code></pre> <p>Method for getting a link.</p> <p>Attributes:</p> <ul> <li> <code>url_name</code>           \u2013            <p>The url name</p> </li> <li> <code>absolute</code>           \u2013            <p>Flag to make URL absolute or relative</p> </li> <li> <code>kwargs</code>           \u2013            <p>Url parameters</p> </li> </ul> <p>Raises:</p> <ul> <li> <code>Exception</code>             \u2013            <p>FRONTEND_URLS parameter is empty</p> </li> <li> <code>Exception</code>             \u2013            <p>The passed link is not specified in the FRONTEND_URLS parameter</p> </li> <li> <code>Exception</code>             \u2013            <p>FRONTEND_DOMAIN parameter not specified</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>str</code>           \u2013            <p>link to the front.</p> </li> </ul> Source code in <code>meringue/core/utils/frontend.py</code> <pre><code>def get_link(\n    url_name: str,\n    absolute: bool | None = True,\n    **kwargs,\n) -&gt; str:\n    \"\"\"\n    Method for getting a link.\n\n    Attributes:\n        url_name: The url name\n        absolute: Flag to make URL absolute or relative\n        kwargs: Url parameters\n\n    Raises:\n        Exception: FRONTEND_URLS parameter is empty\n        Exception: The passed link is not specified in the FRONTEND_URLS parameter\n        Exception: FRONTEND_DOMAIN parameter not specified\n\n    Returns:\n        link to the front.\n    \"\"\"\n\n    if m_settings.FRONTEND_URLS is None:\n        msg = \"FRONTEND_URLS parameter is empty\"\n        raise Exception(msg)\n\n    if url_name not in m_settings.FRONTEND_URLS:\n        msg = f\"The passed link `{url_name}` is not specified in the FRONTEND_URLS parameter\"\n        raise Exception(msg)\n\n    url = m_settings.FRONTEND_URLS[url_name]\n    url = url(**kwargs) if callable(url) else url.format(**kwargs)\n\n    if absolute:\n        if m_settings.FRONTEND_DOMAIN is None:\n            msg = \"FRONTEND_DOMAIN option not set\"\n            raise Exception(msg)\n\n        url = urljoin(m_settings.FRONTEND_DOMAIN, url)\n\n    return url\n</code></pre>"},{"location":"reference/meringue/core/utils/crypt/","title":"crypt.py","text":""},{"location":"reference/meringue/core/utils/crypt/#meringue.core.utils.crypt","title":"meringue.core.utils.crypt","text":""},{"location":"reference/meringue/core/utils/crypt/#meringue.core.utils.crypt.encrypt_message","title":"encrypt_message","text":"<pre><code>encrypt_message(msg: str) -&gt; str\n</code></pre> <p>Method for encrypting a message with AES algorithm and the GCM method.</p> <p>Attributes:</p> <ul> <li> <code>msg</code>           \u2013            <p>Message to Encrypt.</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>str</code>           \u2013            <p>Encrypted message.</p> </li> </ul> Source code in <code>meringue/core/utils/crypt.py</code> <pre><code>def encrypt_message(msg: str) -&gt; str:\n    \"\"\"\n    Method for encrypting a message with AES algorithm and the GCM method.\n\n    Attributes:\n        msg: Message to Encrypt.\n\n    Returns:\n        Encrypted message.\n    \"\"\"\n\n    cipher = AES.new(m_settings.CRYPTO_KEY.encode(\"utf8\"), AES.MODE_GCM)\n    encrypted_msg = cipher.encrypt(msg.encode(\"utf8\"))\n    nonce = cipher.nonce\n    result = base64.urlsafe_b64encode(nonce + encrypted_msg).decode(\"utf-8\")\n    return result\n</code></pre>"},{"location":"reference/meringue/core/utils/crypt/#meringue.core.utils.crypt.decrypt_message","title":"decrypt_message","text":"<pre><code>decrypt_message(msg: str) -&gt; str\n</code></pre> <p>Method for decrypting a message encrypted with AES algorithm and the GCM method.</p> <p>Attributes:</p> <ul> <li> <code>msg</code>           \u2013            <p>Message to decrypt.</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>str</code>           \u2013            <p>Decrypted message.</p> </li> </ul> Source code in <code>meringue/core/utils/crypt.py</code> <pre><code>def decrypt_message(msg: str) -&gt; str:\n    \"\"\"\n    Method for decrypting a message encrypted with AES algorithm and the GCM method.\n\n    Attributes:\n        msg: Message to decrypt.\n\n    Returns:\n        Decrypted message.\n    \"\"\"\n    raw_msg = base64.urlsafe_b64decode(msg.encode(\"utf-8\"))\n    nonce, raw_msg = raw_msg[: AES.block_size], raw_msg[AES.block_size :]\n    cipher = AES.new(m_settings.CRYPTO_KEY.encode(\"utf-8\"), AES.MODE_GCM, nonce=nonce)\n    decrypted_msg = cipher.decrypt(raw_msg).decode(\"utf-8\")\n    return decrypted_msg\n</code></pre>"},{"location":"reference/meringue/core/utils/datetime/","title":"datetime.py","text":""},{"location":"reference/meringue/core/utils/datetime/#meringue.core.utils.datetime","title":"meringue.core.utils.datetime","text":""},{"location":"reference/meringue/core/utils/datetime/#meringue.core.utils.datetime.format_date_from_to","title":"format_date_from_to","text":"<pre><code>format_date_from_to(\n    date_start: date, date_end: date, delimiter: str = \"-\"\n) -&gt; str\n</code></pre> <p>Method to display date period.</p> <p>Possible output formats depending on the input data:</p> <ul> <li><code>DD.MM.YYYY - DD.MM.YYYY</code></li> <li><code>DD.MM - DD.MM.YYYY</code></li> <li><code>DD - DD.MM.YYYY</code></li> <li><code>DD.MM.YYYY</code></li> </ul> <p>Examples:</p> <pre><code>&gt;&gt;&gt; print(format_date_from_to(dt.date(2020, 1, 1), dt.date(2020, 2, 1)))\n01.01 - 01.02.2020\n</code></pre> <p>Attributes:</p> <ul> <li> <code>date_start</code>           \u2013            <p>Period start date.</p> </li> <li> <code>date_end</code>           \u2013            <p>Period end date.</p> </li> <li> <code>delimiter</code>           \u2013            <p>Dates delimiter.</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>str</code>           \u2013            <p>Date period string.</p> </li> </ul> Source code in <code>meringue/core/utils/datetime.py</code> <pre><code>def format_date_from_to(\n    date_start: dt.date,\n    date_end: dt.date,\n    delimiter: str = \"-\",\n) -&gt; str:\n    \"\"\"\n    Method to display date period.\n\n    Possible output formats depending on the input data:\n\n    * `DD.MM.YYYY - DD.MM.YYYY`\n    * `DD.MM - DD.MM.YYYY`\n    * `DD - DD.MM.YYYY`\n    * `DD.MM.YYYY`\n\n    Examples:\n        ```pycon\n        &gt;&gt;&gt; print(format_date_from_to(dt.date(2020, 1, 1), dt.date(2020, 2, 1)))\n        01.01 - 01.02.2020\n        ```\n\n    Attributes:\n        date_start: Period start date.\n        date_end: Period end date.\n        delimiter: Dates delimiter.\n\n    Returns:\n        Date period string.\n    \"\"\"\n\n    if date_start.year != date_end.year:\n        return f\"{date_start:%d.%m.%Y} {delimiter} {date_end:%d.%m.%Y}\"\n\n    if date_start.month != date_end.month:\n        return f\"{date_start:%d.%m} {delimiter} {date_end:%d.%m.%Y}\"\n\n    if date_start.day != date_end.day:\n        return f\"{date_start:%d} {delimiter} {date_end:%d.%m.%Y}\"\n\n    return f\"{date_end:%d.%m.%Y}\"\n</code></pre>"},{"location":"reference/meringue/core/utils/frontend/","title":"frontend.py","text":""},{"location":"reference/meringue/core/utils/frontend/#meringue.core.utils.frontend","title":"meringue.core.utils.frontend","text":""},{"location":"reference/meringue/core/utils/frontend/#meringue.core.utils.frontend.get_link","title":"get_link","text":"<pre><code>get_link(\n    url_name: str, absolute: bool | None = True, **kwargs\n) -&gt; str\n</code></pre> <p>Method for getting a link.</p> <p>Attributes:</p> <ul> <li> <code>url_name</code>           \u2013            <p>The url name</p> </li> <li> <code>absolute</code>           \u2013            <p>Flag to make URL absolute or relative</p> </li> <li> <code>kwargs</code>           \u2013            <p>Url parameters</p> </li> </ul> <p>Raises:</p> <ul> <li> <code>Exception</code>             \u2013            <p>FRONTEND_URLS parameter is empty</p> </li> <li> <code>Exception</code>             \u2013            <p>The passed link is not specified in the FRONTEND_URLS parameter</p> </li> <li> <code>Exception</code>             \u2013            <p>FRONTEND_DOMAIN parameter not specified</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>str</code>           \u2013            <p>link to the front.</p> </li> </ul> Source code in <code>meringue/core/utils/frontend.py</code> <pre><code>def get_link(\n    url_name: str,\n    absolute: bool | None = True,\n    **kwargs,\n) -&gt; str:\n    \"\"\"\n    Method for getting a link.\n\n    Attributes:\n        url_name: The url name\n        absolute: Flag to make URL absolute or relative\n        kwargs: Url parameters\n\n    Raises:\n        Exception: FRONTEND_URLS parameter is empty\n        Exception: The passed link is not specified in the FRONTEND_URLS parameter\n        Exception: FRONTEND_DOMAIN parameter not specified\n\n    Returns:\n        link to the front.\n    \"\"\"\n\n    if m_settings.FRONTEND_URLS is None:\n        msg = \"FRONTEND_URLS parameter is empty\"\n        raise Exception(msg)\n\n    if url_name not in m_settings.FRONTEND_URLS:\n        msg = f\"The passed link `{url_name}` is not specified in the FRONTEND_URLS parameter\"\n        raise Exception(msg)\n\n    url = m_settings.FRONTEND_URLS[url_name]\n    url = url(**kwargs) if callable(url) else url.format(**kwargs)\n\n    if absolute:\n        if m_settings.FRONTEND_DOMAIN is None:\n            msg = \"FRONTEND_DOMAIN option not set\"\n            raise Exception(msg)\n\n        url = urljoin(m_settings.FRONTEND_DOMAIN, url)\n\n    return url\n</code></pre>"},{"location":"reference/meringue/protected/__init__/","title":"__init__.py","text":""},{"location":"reference/meringue/protected/__init__/#meringue.protected","title":"meringue.protected","text":""},{"location":"reference/meringue/protected/apps/","title":"apps.py","text":""},{"location":"reference/meringue/protected/apps/#meringue.protected.apps","title":"meringue.protected.apps","text":""},{"location":"reference/meringue/protected/fields/","title":"fields.py","text":""},{"location":"reference/meringue/protected/fields/#meringue.protected.fields","title":"meringue.protected.fields","text":""},{"location":"reference/meringue/protected/fields/#meringue.protected.fields.ProtectedFileMixin","title":"ProtectedFileMixin","text":""},{"location":"reference/meringue/protected/fields/#meringue.protected.fields.ProtectedFileMixin.url","title":"url  <code>property</code>","text":"<pre><code>url\n</code></pre> <p>Link to the view with access verification to the file</p>"},{"location":"reference/meringue/protected/fields/#meringue.protected.fields.ProtectedFileMixin.redirect_url","title":"redirect_url  <code>property</code>","text":"<pre><code>redirect_url\n</code></pre> <p>Link to the file where nginx should serve it after access verification.</p>"},{"location":"reference/meringue/protected/fields/#meringue.protected.fields.ProtectedFileMixin.original_url","title":"original_url  <code>property</code>","text":"<pre><code>original_url\n</code></pre> <p>The original link to the file.</p>"},{"location":"reference/meringue/protected/fields/#meringue.protected.fields.ProtectedFileField","title":"ProtectedFileField","text":"<pre><code>ProtectedFileField(\n    view_name,\n    verbose_name=None,\n    name=None,\n    upload_to=\"protected\",\n    storage=None,\n    host_name=None,\n    disposition=\"attachment\",\n    nginx_location_getter=PROTECTED_NGINX_LOCATION_GETTER,\n    **kwargs\n)\n</code></pre> <p>               Bases: <code>FileField</code></p> <p>A field that adds the mechanism of a protected file.</p> Source code in <code>meringue/protected/fields.py</code> <pre><code>def __init__(\n    self,\n    view_name,\n    verbose_name=None,\n    name=None,\n    upload_to=\"protected\",\n    storage=None,\n    host_name=None,\n    disposition=\"attachment\",\n    nginx_location_getter=m_settings.PROTECTED_NGINX_LOCATION_GETTER,\n    **kwargs,\n):\n    self.m_protected_view_name = view_name\n    self.m_protected_host_name = host_name\n    self.m_protected_disposition = disposition\n    self.m_protected_nginx_location_getter = nginx_location_getter\n    super().__init__(verbose_name, name, upload_to, storage, **kwargs)\n</code></pre>"},{"location":"reference/meringue/protected/fields/#meringue.protected.fields.ProtectedImageField","title":"ProtectedImageField","text":"<pre><code>ProtectedImageField(\n    view_name,\n    verbose_name=None,\n    name=None,\n    width_field=None,\n    height_field=None,\n    host_name=None,\n    disposition=\"attachment\",\n    nginx_location_getter=PROTECTED_NGINX_LOCATION_GETTER,\n    **kwargs\n)\n</code></pre> <p>               Bases: <code>ImageField</code></p> <p>A field that adds the mechanism of a protected image.</p> Source code in <code>meringue/protected/fields.py</code> <pre><code>def __init__(\n    self,\n    view_name,\n    verbose_name=None,\n    name=None,\n    width_field=None,\n    height_field=None,\n    host_name=None,\n    disposition=\"attachment\",\n    nginx_location_getter=m_settings.PROTECTED_NGINX_LOCATION_GETTER,\n    **kwargs,\n):\n    kwargs.setdefault(\"upload_to\", \"protected\")\n    self.m_protected_view_name = view_name\n    self.m_protected_host_name = host_name\n    self.m_protected_disposition = disposition\n    self.m_protected_nginx_location_getter = nginx_location_getter\n    super().__init__(verbose_name, name, width_field, height_field, **kwargs)\n</code></pre>"},{"location":"reference/meringue/protected/utils/","title":"utils.py","text":""},{"location":"reference/meringue/protected/utils/#meringue.protected.utils","title":"meringue.protected.utils","text":""},{"location":"reference/meringue/protected/utils/#meringue.protected.utils.nginx_location_getter","title":"nginx_location_getter","text":"<pre><code>nginx_location_getter(field_file)\n</code></pre> <p>Getter for the link to the file where nginx should serve it after access verification</p> Source code in <code>meringue/protected/utils.py</code> <pre><code>def nginx_location_getter(field_file):\n    \"\"\"\n    Getter for the link to the file where nginx should serve it after access verification\n    \"\"\"\n\n    return field_file.original_url\n</code></pre>"},{"location":"reference/meringue/protected/views/","title":"views.py","text":""},{"location":"reference/meringue/protected/views/#meringue.protected.views","title":"meringue.protected.views","text":""},{"location":"reference/meringue/protected/views/#meringue.protected.views.x_accel_redirect_view","title":"x_accel_redirect_view","text":"<pre><code>x_accel_redirect_view(\n    request, cid, field, pk, disp=\"inline\"\n)\n</code></pre> <p>The view checks the user's access to view and serves the file.</p> <p>If you enable the parameter PROTECTED_SERVE_WITH_NGINX, the file will not be served; instead, the response will contain the X-Accel-Redirect header pointing to the original file. It is expected that nginx will return the file using the internal parameter.</p> Source code in <code>meringue/protected/views.py</code> <pre><code>def x_accel_redirect_view(request, cid, field, pk, disp=\"inline\"):\n    \"\"\"\n    The view checks the user's access to view and serves the file.\n\n    If you enable the parameter\n    [PROTECTED_SERVE_WITH_NGINX][meringue.conf.default_settings.PROTECTED_SERVE_WITH_NGINX], the\n    file will not be served; instead, the response will contain the X-Accel-Redirect header\n    pointing to the original file. It is expected that nginx will return the file using the\n    [internal](https://nginx.org/en/docs/http/ngx_http_core_module.html#internal) parameter.\n    \"\"\"\n\n    contenttype = ContentType.objects.get(id=cid)\n\n    if not request.user.has_perm(f\"{contenttype.app_label}.view_{contenttype.model}\"):\n        raise PermissionDenied()\n\n    model = contenttype.model_class().objects.get(pk=pk)\n    file = getattr(model, field)\n\n    if not file:\n        raise Http404()\n\n    if m_settings.PROTECTED_SERVE_WITH_NGINX:\n        file_name = Path(file.name).name\n        response = HttpResponse()\n        response[\"Content-Type\"] = mimetypes.guess_type(file.path)[0]\n        response[\"Content-Disposition\"] = f\"{disp}; filename={quote(file_name)}\"\n\n        if isinstance(file, ProtectedFieldFile | ProtectedImageFieldFile):\n            redirect_url = file.redirect_url\n        else:\n            redirect_url = file.url\n\n        response[\"X-Accel-Redirect\"] = redirect_url\n        return response\n\n    return FileResponse(\n        open(file.path, \"rb\"),  # noqa: SIM115\n        as_attachment=disp == \"attachment\",\n    )\n</code></pre>"},{"location":"reference/meringue/thumbnail/__init__/","title":"__init__.py","text":""},{"location":"reference/meringue/thumbnail/__init__/#meringue.thumbnail","title":"meringue.thumbnail","text":""},{"location":"reference/meringue/thumbnail/actions/","title":"actions.py","text":""},{"location":"reference/meringue/thumbnail/actions/#meringue.thumbnail.actions","title":"meringue.thumbnail.actions","text":""},{"location":"reference/meringue/thumbnail/actions/#meringue.thumbnail.actions.get_size","title":"get_size","text":"<pre><code>get_size(options, max_sizes=True)\n</code></pre> <p>Calc image size</p> Source code in <code>meringue/thumbnail/actions.py</code> <pre><code>def get_size(options, max_sizes=True):\n    \"\"\"\n    Calc image size\n    \"\"\"\n\n    new_size = options[constants.PROP_NEW_SIZE]\n    if max_sizes:\n        if options[constants.PROP_MAX_WIDTH] and new_size[0] &gt; options[constants.PROP_MAX_WIDTH]:\n            new_size[0] = options[constants.PROP_MAX_WIDTH]\n\n        if options[constants.PROP_MAX_HEIGHT] and new_size[1] &gt; options[constants.PROP_MAX_HEIGHT]:\n            new_size[1] = options[constants.PROP_MAX_HEIGHT]\n\n    return new_size\n</code></pre>"},{"location":"reference/meringue/thumbnail/actions/#meringue.thumbnail.actions.crop","title":"crop","text":"<pre><code>crop(image, options)\n</code></pre> <p>Crop image</p> Source code in <code>meringue/thumbnail/actions.py</code> <pre><code>def crop(image, options):\n    \"\"\"\n    Crop image\n    \"\"\"\n\n    new_size = get_size(options)\n    new_size = [int(new_size[0]), int(new_size[1])]\n\n    current_size = options[constants.PROP_CURRENT_SIZE]\n    thumb = Image.new(mode=\"RGBA\", size=new_size, color=options[constants.PROP_BG_COLOR])\n\n    # \u043f\u043e\u0437\u0438\u0446\u0438\u043e\u043d\u0438\u0440\u0443\u0435\u043c \u043d\u043e\u0432\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043f\u043e X\n    if options[constants.PROP_CROP_METHOD][0] == constants.CROP_METHOD_LEFT:\n        x = 0\n    elif options[constants.PROP_CROP_METHOD][0] == constants.CROP_METHOD_RIGTH:\n        x = new_size[0] - current_size[0]\n    else:\n        # CROP_METHOD_CENTER\n        x = (new_size[0] - current_size[0]) / 2\n\n    # \u043f\u043e\u0437\u0438\u0446\u0438\u043e\u043d\u0438\u0440\u0443\u0435\u043c \u043d\u043e\u0432\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043f\u043e Y\n    if options[constants.PROP_CROP_METHOD][1] == constants.CROP_METHOD_TOP:\n        y = 0\n    elif options[constants.PROP_CROP_METHOD][1] == constants.CROP_METHOD_BOTTOM:\n        y = new_size[1] - current_size[1]\n    else:\n        # CROP_METHOD_CENTER\n        y = (new_size[1] - current_size[1]) / 2\n\n    thumb.paste(image, (int(x), int(y)))\n    image = thumb\n    options[constants.PROP_CURRENT_SIZE] = new_size\n\n    return image\n</code></pre>"},{"location":"reference/meringue/thumbnail/actions/#meringue.thumbnail.actions.resize","title":"resize","text":"<pre><code>resize(image, options)\n</code></pre> <p>Resize image</p> Source code in <code>meringue/thumbnail/actions.py</code> <pre><code>def resize(image, options):\n    \"\"\"\n    Resize image\n    \"\"\"\n\n    new_size = get_size(options)\n    current_size = options[constants.PROP_CURRENT_SIZE]\n    method = options[constants.PROP_RESIZE_METHOD]\n    strategy = options[constants.PROP_RESIZE_STRATEGY]\n\n    if method in [constants.RESIZE_METHOD_COVER, constants.RESIZE_METHOD_CONTAIN]:\n        # \u0440\u0435\u0436\u0438\u043c cover - \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0432\u0441\u0451 \u043d\u043e\u0432\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0440\u044b\u043c\n        if method == constants.RESIZE_METHOD_COVER:\n            res = max(\n                new_size[0] / current_size[0],\n                new_size[1] / current_size[1],\n            )\n\n        # \u0440\u0435\u0436\u0438\u043c contain - \u0432\u043f\u0438\u0441\u0430\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0432 \u043d\u043e\u0432\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440\n        elif method == constants.RESIZE_METHOD_CONTAIN:\n            res = min(\n                new_size[0] / current_size[0],\n                new_size[1] / current_size[1],\n            )\n\n        if strategy == constants.RESIZE_STRATEGY_DO_NOT_INCREASE_SIZE and res &gt; 1:\n            # \u043e\u0442\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c \u0432 \u0443\u0432\u0435\u043b\u0438\u0447\u0435\u043d\u0438\u0438 \u0440\u0430\u0437\u043c\u0435\u0440\u0430\n            new_size = current_size.copy()\n\n        elif strategy == constants.RESIZE_STRATEGY_DO_NOT_REDUCE_SIZE and res &lt; 1:\n            # \u043e\u0442\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c \u0432 \u0443\u043c\u0435\u043d\u044c\u0448\u0435\u043d\u0438\u0438 \u0440\u0430\u0437\u043c\u0435\u0440\u0430\n            new_size = current_size.copy()\n\n        else:\n            new_size = [math.floor(current_size[0] * res), math.floor(current_size[1] * res)]\n\n    else:  # noqa: PLR5501\n        # RESIZE_METHOD_STRETCH\n        # \u043f\u0440\u0438 \u0441\u0436\u0430\u0442\u0438\u0438 \u043d\u0438\u043a\u0430\u043a \u043d\u0435 \u043c\u0435\u043d\u044f\u0435\u043c \u043a\u043e\u043d\u0435\u0447\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440\n\n        if strategy != constants.RESIZE_STRATEGY_STANDART:\n            msg = (\n                f\"The `{constants.RESIZE_METHOD_STRETCH}` method is not compatible \"\n                f\"with the `{strategy}` strategy.\"\n            )\n            raise ActionError(msg)\n\n    new_size = [int(new_size[0]), int(new_size[1])]\n\n    if new_size[0] != current_size[0] or new_size[1] != current_size[1]:\n        image = image.resize(new_size, resample=Image.LANCZOS)\n        options[constants.PROP_CURRENT_SIZE] = new_size\n\n    return image\n</code></pre>"},{"location":"reference/meringue/thumbnail/apps/","title":"apps.py","text":""},{"location":"reference/meringue/thumbnail/apps/#meringue.thumbnail.apps","title":"meringue.thumbnail.apps","text":""},{"location":"reference/meringue/thumbnail/constants/","title":"constants.py","text":""},{"location":"reference/meringue/thumbnail/constants/#meringue.thumbnail.constants","title":"meringue.thumbnail.constants","text":""},{"location":"reference/meringue/thumbnail/constants/#meringue.thumbnail.constants.FORMAT_BMP","title":"FORMAT_BMP  <code>module-attribute</code>","text":"<pre><code>FORMAT_BMP: Final[str] = 'BMP'\n</code></pre> <p>Format BMP</p>"},{"location":"reference/meringue/thumbnail/constants/#meringue.thumbnail.constants.FORMAT_EPS","title":"FORMAT_EPS  <code>module-attribute</code>","text":"<pre><code>FORMAT_EPS: Final[str] = 'EPS'\n</code></pre> <p>Format EPS</p>"},{"location":"reference/meringue/thumbnail/constants/#meringue.thumbnail.constants.FORMAT_GIF","title":"FORMAT_GIF  <code>module-attribute</code>","text":"<pre><code>FORMAT_GIF: Final[str] = 'GIF'\n</code></pre> <p>Format GIF</p>"},{"location":"reference/meringue/thumbnail/constants/#meringue.thumbnail.constants.FORMAT_ICO","title":"FORMAT_ICO  <code>module-attribute</code>","text":"<pre><code>FORMAT_ICO: Final[str] = 'ICO'\n</code></pre> <p>Format ICO</p>"},{"location":"reference/meringue/thumbnail/constants/#meringue.thumbnail.constants.FORMAT_JPEG","title":"FORMAT_JPEG  <code>module-attribute</code>","text":"<pre><code>FORMAT_JPEG: Final[str] = 'JPEG'\n</code></pre> <p>Format JPEG</p>"},{"location":"reference/meringue/thumbnail/constants/#meringue.thumbnail.constants.FORMAT_PNG","title":"FORMAT_PNG  <code>module-attribute</code>","text":"<pre><code>FORMAT_PNG: Final[str] = 'PNG'\n</code></pre> <p>Format PNG</p>"},{"location":"reference/meringue/thumbnail/constants/#meringue.thumbnail.constants.FORMAT_TIFF","title":"FORMAT_TIFF  <code>module-attribute</code>","text":"<pre><code>FORMAT_TIFF: Final[str] = 'TIFF'\n</code></pre> <p>Format TIFF</p>"},{"location":"reference/meringue/thumbnail/constants/#meringue.thumbnail.constants.FORMAT_WEBP","title":"FORMAT_WEBP  <code>module-attribute</code>","text":"<pre><code>FORMAT_WEBP: Final[str] = 'WEBP'\n</code></pre> <p>Format WEBP</p>"},{"location":"reference/meringue/thumbnail/constants/#meringue.thumbnail.constants.EXTENSION_BMP","title":"EXTENSION_BMP  <code>module-attribute</code>","text":"<pre><code>EXTENSION_BMP: Final[str] = '.bmp'\n</code></pre> <p>Extension .bmp</p>"},{"location":"reference/meringue/thumbnail/constants/#meringue.thumbnail.constants.EXTENSION_EPS","title":"EXTENSION_EPS  <code>module-attribute</code>","text":"<pre><code>EXTENSION_EPS: Final[str] = '.eps'\n</code></pre> <p>Extension .eps</p>"},{"location":"reference/meringue/thumbnail/constants/#meringue.thumbnail.constants.EXTENSION_GIF","title":"EXTENSION_GIF  <code>module-attribute</code>","text":"<pre><code>EXTENSION_GIF: Final[str] = '.gif'\n</code></pre> <p>Extension .gif</p>"},{"location":"reference/meringue/thumbnail/constants/#meringue.thumbnail.constants.EXTENSION_ICO","title":"EXTENSION_ICO  <code>module-attribute</code>","text":"<pre><code>EXTENSION_ICO: Final[str] = '.ico'\n</code></pre> <p>Extension .ico</p>"},{"location":"reference/meringue/thumbnail/constants/#meringue.thumbnail.constants.EXTENSION_JPG","title":"EXTENSION_JPG  <code>module-attribute</code>","text":"<pre><code>EXTENSION_JPG: Final[str] = '.jpg'\n</code></pre> <p>Extension .jpg</p>"},{"location":"reference/meringue/thumbnail/constants/#meringue.thumbnail.constants.EXTENSION_JPEG","title":"EXTENSION_JPEG  <code>module-attribute</code>","text":"<pre><code>EXTENSION_JPEG: Final[str] = '.jpeg'\n</code></pre> <p>Extension .jpeg</p>"},{"location":"reference/meringue/thumbnail/constants/#meringue.thumbnail.constants.EXTENSION_JFIF","title":"EXTENSION_JFIF  <code>module-attribute</code>","text":"<pre><code>EXTENSION_JFIF: Final[str] = '.jfif'\n</code></pre> <p>Extension .jfif</p>"},{"location":"reference/meringue/thumbnail/constants/#meringue.thumbnail.constants.EXTENSION_PNG","title":"EXTENSION_PNG  <code>module-attribute</code>","text":"<pre><code>EXTENSION_PNG: Final[str] = '.png'\n</code></pre> <p>Extension .png</p>"},{"location":"reference/meringue/thumbnail/constants/#meringue.thumbnail.constants.EXTENSION_TIFF","title":"EXTENSION_TIFF  <code>module-attribute</code>","text":"<pre><code>EXTENSION_TIFF: Final[str] = '.tiff'\n</code></pre> <p>Extension .tiff</p>"},{"location":"reference/meringue/thumbnail/constants/#meringue.thumbnail.constants.EXTENSION_WEBP","title":"EXTENSION_WEBP  <code>module-attribute</code>","text":"<pre><code>EXTENSION_WEBP: Final[str] = '.webp'\n</code></pre> <p>Extension .webp</p>"},{"location":"reference/meringue/thumbnail/constants/#meringue.thumbnail.constants.FORMATS_BY_EXTENSIONS","title":"FORMATS_BY_EXTENSIONS  <code>module-attribute</code>","text":"<pre><code>FORMATS_BY_EXTENSIONS: Final[dict[str, str]] = {\n    EXTENSION_BMP: FORMAT_BMP,\n    EXTENSION_EPS: FORMAT_EPS,\n    EXTENSION_GIF: FORMAT_GIF,\n    EXTENSION_ICO: FORMAT_ICO,\n    EXTENSION_JPG: FORMAT_JPEG,\n    EXTENSION_JPEG: FORMAT_JPEG,\n    EXTENSION_JFIF: FORMAT_JPEG,\n    EXTENSION_PNG: FORMAT_PNG,\n    EXTENSION_TIFF: FORMAT_TIFF,\n    EXTENSION_WEBP: FORMAT_WEBP,\n}\n</code></pre> <p>Formats by extensions</p>"},{"location":"reference/meringue/thumbnail/constants/#meringue.thumbnail.constants.EXTENSIONS_BY_FORMATS","title":"EXTENSIONS_BY_FORMATS  <code>module-attribute</code>","text":"<pre><code>EXTENSIONS_BY_FORMATS: Final[dict[str, str]] = {\n    FORMAT_BMP: EXTENSION_BMP,\n    FORMAT_EPS: EXTENSION_EPS,\n    FORMAT_GIF: EXTENSION_GIF,\n    FORMAT_ICO: EXTENSION_ICO,\n    FORMAT_JPEG: EXTENSION_JPG,\n    FORMAT_PNG: EXTENSION_PNG,\n    FORMAT_TIFF: EXTENSION_TIFF,\n    FORMAT_WEBP: EXTENSION_WEBP,\n}\n</code></pre> <p>Extensions by formats</p>"},{"location":"reference/meringue/thumbnail/constants/#meringue.thumbnail.constants.FORMATS_WITH_ALPHA_SUPPORT","title":"FORMATS_WITH_ALPHA_SUPPORT  <code>module-attribute</code>","text":"<pre><code>FORMATS_WITH_ALPHA_SUPPORT: Final[list[str]] = [\n    FORMAT_BMP,\n    FORMAT_EPS,\n    FORMAT_GIF,\n    FORMAT_ICO,\n    FORMAT_PNG,\n    FORMAT_TIFF,\n    FORMAT_WEBP,\n]\n</code></pre> <p>Formats with alpha support</p>"},{"location":"reference/meringue/thumbnail/drf_fields/","title":"drf_fields.py","text":""},{"location":"reference/meringue/thumbnail/drf_fields/#meringue.thumbnail.drf_fields","title":"meringue.thumbnail.drf_fields","text":""},{"location":"reference/meringue/thumbnail/drf_fields/#meringue.thumbnail.drf_fields.MImageField","title":"MImageField","text":"<pre><code>MImageField(size=None, job_chain=None, **kwargs)\n</code></pre> <p>               Bases: <code>BaseImageField</code></p> <p>Optimize image to represent them</p> Source code in <code>meringue/thumbnail/drf_fields.py</code> <pre><code>def __init__(self, size=None, job_chain=None, **kwargs):\n    if bool(size) and bool(job_chain):\n        msg = \"Need to set `size` or `job_chain` attribute (not both).\"\n        raise Exception(msg)\n\n    elif size:\n        self.job_chain = [\n            f\"s:{size[0]}x{size[1]}\",\n            \"rm:cover\",\n            \"rs:no_increase\",\n            \"resize\",\n        ]\n\n    elif job_chain:\n        self.job_chain = job_chain\n\n    else:\n        self.job_chain = []\n\n    super().__init__(**kwargs)\n</code></pre>"},{"location":"reference/meringue/thumbnail/drf_fields/#meringue.thumbnail.drf_fields.MImageField.to_representation","title":"to_representation","text":"<pre><code>to_representation(value)\n</code></pre> TODO <ul> <li>Add params to get_thumbnail for optimize images</li> </ul> Source code in <code>meringue/thumbnail/drf_fields.py</code> <pre><code>def to_representation(self, value):\n    \"\"\"\n    TODO:\n        * Add params to get_thumbnail for optimize images\n    \"\"\"\n\n    if not value:\n        return None\n\n    path = Path(value.path)\n\n    if path.exists():\n        thumbnail = DefaultThumbnailer(path, job_chain=self.job_chain)\n        optimized_image_url = thumbnail.get_thumbnail(get_format_from_path(path)).url\n        result = optimized_image_url\n\n    else:\n        logger.error(f\"File `{path}` not found\")\n        result = _dummyimage([])\n\n    return result\n</code></pre>"},{"location":"reference/meringue/thumbnail/drf_fields/#meringue.thumbnail.drf_fields.MImageSetField","title":"MImageSetField","text":"<pre><code>MImageSetField(\n    size=None,\n    dimensions=(1, 2),\n    base_job_chain=None,\n    job_chains=None,\n    **kwargs\n)\n</code></pre> <p>               Bases: <code>ImageField</code></p> <p>Image field - make multiple files in different formats.</p> <p>Can set size (eg '100x100'), job_chain (arrays of jobs by dimensions) or nothing to optimize images only</p> Source code in <code>meringue/thumbnail/drf_fields.py</code> <pre><code>def __init__(\n    self,\n    size=None,\n    dimensions=(1, 2),\n    base_job_chain=None,\n    job_chains=None,\n    **kwargs,\n):\n    if size and job_chains:\n        msg = \"Need to set 'size' or 'job_chains' attribute (not both).\"\n        raise Exception(msg)\n\n    elif size:\n        if not dimensions:\n            msg = (\n                \"If you specify the 'sizes' attribute, \"\n                \"then the 'dimensions' attribute cannot be empty.\"\n            )\n            raise Exception(msg)\n\n        self.job_chains = {}\n\n        if 1 not in dimensions:\n            dimensions.insert(0, 1)\n\n        for dimension in dimensions:\n            self.job_chains[dimension] = [\n                f\"s:{round(size[0]*dimension)}x{round(size[1]*dimension)}\",\n                *(base_job_chain or [\"rm:cover\", \"resize\", \"crop\"]),\n            ]\n\n    elif job_chains:\n        self.job_chains = job_chains\n\n    else:\n        self.job_chains = {}\n\n    self.spactacular_annotate()\n    super().__init__(**kwargs)\n</code></pre>"},{"location":"reference/meringue/thumbnail/drf_fields/#meringue.thumbnail.drf_fields.MImageSetField.to_representation","title":"to_representation","text":"<pre><code>to_representation(value)\n</code></pre> <p>Creates multiple images. Image with format as original image and webp.</p> TODO <ul> <li>Add params to get_thumbnail for optimize images</li> <li>In future make av1 image</li> <li>Check enabled webp</li> </ul> Source code in <code>meringue/thumbnail/drf_fields.py</code> <pre><code>def to_representation(self, value):\n    \"\"\"\n    Creates multiple images. Image with format as original image and webp.\n\n    TODO:\n        * Add params to get_thumbnail for optimize images\n        * In future make av1 image\n        * Check enabled webp\n    \"\"\"\n\n    if not value:\n        return None\n\n    path = Path(value.path)\n\n    if not path.exists():\n        logger.error(f\"File `{path}` not found\")\n        return [\n            {\n                \"url\": _dummyimage(self.job_chains[1]),\n                \"type\": \"image/png\",\n            },\n        ]\n\n    original_format = get_format_from_path(path)\n    result = []\n\n    for dimension, job_chain in self.job_chains.items():\n        thumbnail = DefaultThumbnailer(path, job_chain=job_chain)\n        original = thumbnail.get_thumbnail(original_format)\n        webp_thumbnail = thumbnail.get_thumbnail(\"WEBP\")\n\n        if dimension == 1:\n            result = [\n                {\"srcset\": f\"{webp_thumbnail.url} 1x\", \"type\": webp_thumbnail.mimetype},\n                {\"srcset\": f\"{original.url} 1x\", \"type\": original.mimetype},\n            ]\n\n        else:\n            result[0][\"srcset\"] = f\"{result[0]['srcset']}, {webp_thumbnail.url} {dimension}x\"\n            result[1][\"srcset\"] = f\"{result[1]['srcset']}, {original.url} {dimension}x\"\n\n    return result\n</code></pre>"},{"location":"reference/meringue/thumbnail/exceptions/","title":"exceptions.py","text":""},{"location":"reference/meringue/thumbnail/exceptions/#meringue.thumbnail.exceptions","title":"meringue.thumbnail.exceptions","text":""},{"location":"reference/meringue/thumbnail/exceptions/#meringue.thumbnail.exceptions.ThumbnailError","title":"ThumbnailError","text":"<pre><code>ThumbnailError(\n    message: str | None = None, code: str | None = None\n)\n</code></pre> <p>               Bases: <code>Exception</code></p> <p>Base thumbnail exception</p> <p>Attributes:</p> <ul> <li> <code>message</code>           \u2013            <p>Custom error message.</p> </li> <li> <code>code</code>           \u2013            <p>Custom error code.</p> </li> </ul> Source code in <code>meringue/thumbnail/exceptions.py</code> <pre><code>def __init__(self, message: str | None = None, code: str | None = None):\n    \"\"\"\n    Attributes:\n        message: Custom error message.\n        code: Custom error code.\n    \"\"\"\n    self.message = message or self.default_message\n    self.code = code or self.default_code\n    super().__init__(f\"Error `{self.code}`: {self.message}\")\n</code></pre>"},{"location":"reference/meringue/thumbnail/exceptions/#meringue.thumbnail.exceptions.WrongPropertyOptionError","title":"WrongPropertyOptionError","text":"<pre><code>WrongPropertyOptionError(\n    prop: str,\n    option: str,\n    message: str | None = None,\n    code: str | None = None,\n)\n</code></pre> <p>               Bases: <code>ThumbnailError</code></p> <p>Exception wrong property option</p> <p>Attributes:</p> <ul> <li> <code>prop</code>           \u2013            <p>The property with the problem.</p> </li> <li> <code>option</code>           \u2013            <p>Value with which there was a problem.</p> </li> <li> <code>message</code>           \u2013            <p>Custom error message.</p> </li> <li> <code>code</code>           \u2013            <p>Custom error code.</p> </li> </ul> Source code in <code>meringue/thumbnail/exceptions.py</code> <pre><code>def __init__(self, prop: str, option: str, message: str | None = None, code: str | None = None):\n    \"\"\"\n    Attributes:\n        prop: The property with the problem.\n        option: Value with which there was a problem.\n        message: Custom error message.\n        code: Custom error code.\n    \"\"\"\n    message = (message or self.default_message).format(prop=prop, option=option)\n    code = code or self.default_code\n    super().__init__(message, code)\n</code></pre>"},{"location":"reference/meringue/thumbnail/exceptions/#meringue.thumbnail.exceptions.ActionError","title":"ActionError","text":"<pre><code>ActionError(\n    message: str | None = None, code: str | None = None\n)\n</code></pre> <p>               Bases: <code>ThumbnailError</code></p> <p>Action exception</p> Source code in <code>meringue/thumbnail/exceptions.py</code> <pre><code>def __init__(self, message: str | None = None, code: str | None = None):\n    \"\"\"\n    Attributes:\n        message: Custom error message.\n        code: Custom error code.\n    \"\"\"\n    self.message = message or self.default_message\n    self.code = code or self.default_code\n    super().__init__(f\"Error `{self.code}`: {self.message}\")\n</code></pre>"},{"location":"reference/meringue/thumbnail/exceptions/#meringue.thumbnail.exceptions.ThumbnailerError","title":"ThumbnailerError","text":"<pre><code>ThumbnailerError(\n    message: str | None = None, code: str | None = None\n)\n</code></pre> <p>               Bases: <code>ThumbnailError</code></p> <p>Thumbnailer exception</p> Source code in <code>meringue/thumbnail/exceptions.py</code> <pre><code>def __init__(self, message: str | None = None, code: str | None = None):\n    \"\"\"\n    Attributes:\n        message: Custom error message.\n        code: Custom error code.\n    \"\"\"\n    self.message = message or self.default_message\n    self.code = code or self.default_code\n    super().__init__(f\"Error `{self.code}`: {self.message}\")\n</code></pre>"},{"location":"reference/meringue/thumbnail/exceptions/#meringue.thumbnail.exceptions.WrongActionOrPropertyError","title":"WrongActionOrPropertyError","text":"<pre><code>WrongActionOrPropertyError(\n    job: str,\n    message: str | None = None,\n    code: str | None = None,\n)\n</code></pre> <p>               Bases: <code>ThumbnailerError</code></p> <p>Wrong action or property exception</p> <p>Attributes:</p> <ul> <li> <code>job</code>           \u2013            <p>Action with problem.</p> </li> <li> <code>message</code>           \u2013            <p>Custom error message.</p> </li> <li> <code>code</code>           \u2013            <p>Custom error code.</p> </li> </ul> Source code in <code>meringue/thumbnail/exceptions.py</code> <pre><code>def __init__(self, job: str, message: str | None = None, code: str | None = None):\n    \"\"\"\n    Attributes:\n        job: Action with problem.\n        message: Custom error message.\n        code: Custom error code.\n    \"\"\"\n    message = (message or self.default_message).format(job=job)\n    super().__init__(message, code)\n</code></pre>"},{"location":"reference/meringue/thumbnail/exceptions/#meringue.thumbnail.exceptions.WrongFormatError","title":"WrongFormatError","text":"<pre><code>WrongFormatError(\n    out_format: str,\n    message: str | None = None,\n    code: str | None = None,\n)\n</code></pre> <p>               Bases: <code>ThumbnailerError</code></p> <p>Wrong action or property exception</p> <p>Attributes:</p> <ul> <li> <code>out_format</code>           \u2013            <p>Problem format.</p> </li> <li> <code>message</code>           \u2013            <p>Custom error message.</p> </li> <li> <code>code</code>           \u2013            <p>Custom error code.</p> </li> </ul> Source code in <code>meringue/thumbnail/exceptions.py</code> <pre><code>def __init__(self, out_format: str, message: str | None = None, code: str | None = None):\n    \"\"\"\n    Attributes:\n        out_format: Problem format.\n        message: Custom error message.\n        code: Custom error code.\n    \"\"\"\n    message = (message or self.default_message).format(out_format=out_format)\n    super().__init__(message, code)\n</code></pre>"},{"location":"reference/meringue/thumbnail/generators/","title":"generators.py","text":""},{"location":"reference/meringue/thumbnail/generators/#meringue.thumbnail.generators","title":"meringue.thumbnail.generators","text":""},{"location":"reference/meringue/thumbnail/generators/#meringue.thumbnail.generators.Thumbnailer","title":"Thumbnailer","text":"<pre><code>Thumbnailer(\n    image_path: Path,\n    job_chain: JobChainType,\n    storage: Storage | None = None,\n)\n</code></pre> <p>Thumbnail generator class.</p> <p>Todo:</p> <ul> <li>aliases for job changes</li> </ul> <p>Attributes:</p> <ul> <li> <code>image_path</code>           \u2013            <p>Source image path.</p> </li> <li> <code>job_chain</code>           \u2013            <p>Thumbnail job chain.</p> </li> <li> <code>storage</code>           \u2013            <p>File storage.</p> </li> </ul> Source code in <code>meringue/thumbnail/generators.py</code> <pre><code>def __init__(\n    self,\n    image_path: Path,\n    job_chain: JobChainType,\n    storage: Storage | None = None,\n):\n    \"\"\"\n    Attributes:\n        image_path: Source image path.\n        job_chain: Thumbnail job chain.\n        storage: File storage.\n    \"\"\"\n\n    if not image_path.is_absolute():\n        msg = \"`image_path` must be absolute\"\n        raise AttributeError(msg, name=\"image_path\")\n\n    self.source_image_path = image_path\n    self.job_chain = job_chain\n    self.storage = storage or default_storage\n</code></pre>"},{"location":"reference/meringue/thumbnail/generators/#meringue.thumbnail.generators.Thumbnailer.make_thumbnail","title":"make_thumbnail","text":"<pre><code>make_thumbnail() -&gt; Image\n</code></pre> <p>Makes a thumbnail based on a quest chain.</p> <p>Raises:</p> <ul> <li> <code>WrongActionOrPropertyError</code>             \u2013            <p>Invalid action or property.</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>Image</code>           \u2013            <p>Pillow image.</p> </li> </ul> Source code in <code>meringue/thumbnail/generators.py</code> <pre><code>def make_thumbnail(self) -&gt; Image:\n    \"\"\"\n    Makes a thumbnail based on a quest chain.\n\n    Raises:\n        WrongActionOrPropertyError: Invalid action or property.\n\n    Returns:\n        Pillow image.\n    \"\"\"\n\n    logger.debug(f\"Thumbnail is made using job chain: {', '.join(self.job_chain)}\")\n\n    # openingn and prepearing file\n    image = Image.open(self.source_image_path)\n    image = image.convert(\"RGBA\")\n\n    # prepearing options\n    options = copy.deepcopy(DEFAULT_OPTIONS)\n    options[constants.PROP_CURRENT_SIZE] = [float(i) for i in image.size]\n    options[constants.PROP_NEW_SIZE] = options[constants.PROP_CURRENT_SIZE].copy()\n\n    # applying modifiers\n    for job in self.job_chain:\n        if \":\" in job:\n            # property\n            prop, args = job.split(\":\")\n            options.update(m_settings.THUMBNAIL_PROPERTIES[prop](args, options))\n\n        elif job in m_settings.THUMBNAIL_ACTIONS:\n            # action\n            image = m_settings.THUMBNAIL_ACTIONS[job](image, options)\n\n        else:\n            raise WrongActionOrPropertyError(job)\n\n    return image\n</code></pre>"},{"location":"reference/meringue/thumbnail/generators/#meringue.thumbnail.generators.Thumbnailer.get_thumbnail","title":"get_thumbnail","text":"<pre><code>get_thumbnail(\n    out_format: str, **kwargs\n) -&gt; DefaultThumbnailImage\n</code></pre> <p>Generates and returns a preview image in the specified format.</p> <p>Attributes:</p> <ul> <li> <code>out_format</code>           \u2013            <p>Output image format.</p> </li> <li> <code>**kwargs</code>           \u2013            <p>Output image save extra params.</p> </li> </ul> <p>Raises:</p> <ul> <li> <code>WrongFormatError</code>             \u2013            <p>Format is not supported.</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>DefaultThumbnailImage</code>           \u2013            <p>Thumbnail image.</p> </li> </ul> Source code in <code>meringue/thumbnail/generators.py</code> <pre><code>def get_thumbnail(self, out_format: str, **kwargs) -&gt; DefaultThumbnailImage:\n    \"\"\"\n    Generates and returns a preview image in the specified format.\n\n    Attributes:\n        out_format: Output image format.\n        **kwargs: Output image save extra params.\n\n    Raises:\n        WrongFormatError: Format is not supported.\n\n    Returns:\n        Thumbnail image.\n    \"\"\"\n\n    if out_format not in constants.EXTENSIONS_BY_FORMATS:\n        raise WrongFormatError(out_format)\n\n    image = lazy(self.make_thumbnail, Image.Image)()\n    thumbnail_image = DefaultThumbnailImage(\n        image_path=self.source_image_path,\n        job_chain=self.job_chain,\n        out_format=out_format,\n        image=image,\n        storage=self.storage,\n    )\n    thumbnail_image.save(**kwargs)\n\n    return thumbnail_image\n</code></pre>"},{"location":"reference/meringue/thumbnail/images/","title":"images.py","text":""},{"location":"reference/meringue/thumbnail/images/#meringue.thumbnail.images","title":"meringue.thumbnail.images","text":""},{"location":"reference/meringue/thumbnail/images/#meringue.thumbnail.images.ThumbnailImage","title":"ThumbnailImage","text":"<pre><code>ThumbnailImage(\n    image_path: Path,\n    job_chain: JobChainType,\n    out_format: str,\n    image: Image,\n    storage: Storage | None = None,\n)\n</code></pre> <p>               Bases: <code>AltersData</code></p> <p>Thumbnail Image class.</p> <p>Attributes:</p> <ul> <li> <code>image_path</code>           \u2013            <p>Source image path.</p> </li> <li> <code>job_chain</code>           \u2013            <p>Thumbnail job chain.</p> </li> <li> <code>out_format</code>           \u2013            <p>Output image format.</p> </li> <li> <code>image</code>           \u2013            <p>Thumbnail PIL image.</p> </li> <li> <code>storage</code>           \u2013            <p>File storage.</p> </li> </ul> Source code in <code>meringue/thumbnail/images.py</code> <pre><code>def __init__(\n    self,\n    image_path: Path,\n    job_chain: JobChainType,  # str  = \"extra@1\",\n    out_format: str,\n    image: Image,\n    storage: Storage | None = None,\n):\n    \"\"\"\n    Attributes:\n        image_path: Source image path.\n        job_chain: Thumbnail job chain.\n        out_format: Output image format.\n        image: Thumbnail PIL image.\n        storage: File storage.\n    \"\"\"\n\n    self.source_image_path = image_path\n    self.job_chain = job_chain\n    self.out_format = out_format\n    self.image = image\n    self.storage = storage or default_storage\n    self._saved = None\n</code></pre>"},{"location":"reference/meringue/thumbnail/images/#meringue.thumbnail.images.ThumbnailImage.name","title":"name  <code>property</code>","text":"<pre><code>name: Path\n</code></pre> <p>Relative path to thumbnail.</p> <p>We split the path into separate directories so as not to dump everything in one directory, which can be a problem with a large count of images.</p> <p>Returns:</p> <ul> <li> <code>Path</code>           \u2013            <p>Thumbnail path.</p> </li> </ul>"},{"location":"reference/meringue/thumbnail/images/#meringue.thumbnail.images.ThumbnailImage.thumbnail_hash","title":"thumbnail_hash  <code>property</code>","text":"<pre><code>thumbnail_hash: str\n</code></pre> <p>Calculates the thumbnail hash based on the job chain and source path.</p> <p>Returns:</p> <ul> <li> <code>str</code>           \u2013            <p>Thumbnail hash.</p> </li> </ul>"},{"location":"reference/meringue/thumbnail/images/#meringue.thumbnail.images.ThumbnailImage.file_extension","title":"file_extension  <code>property</code>","text":"<pre><code>file_extension: str\n</code></pre> <p>Returns the file extension for the thumbnail.</p> <p>Returns:</p> <ul> <li> <code>str</code>           \u2013            <p>Thumbnail file extension.</p> </li> </ul>"},{"location":"reference/meringue/thumbnail/images/#meringue.thumbnail.images.ThumbnailImage.filename","title":"filename  <code>property</code>","text":"<pre><code>filename: str\n</code></pre> <p>Returns the file name for the thumbnail.</p> <p>Returns:</p> <ul> <li> <code>str</code>           \u2013            <p>Thumbnail file name.</p> </li> </ul>"},{"location":"reference/meringue/thumbnail/images/#meringue.thumbnail.images.ThumbnailImage.path","title":"path  <code>property</code>","text":"<pre><code>path: Path\n</code></pre> <p>Absolute path to thumbnail.</p>"},{"location":"reference/meringue/thumbnail/images/#meringue.thumbnail.images.ThumbnailImage.url","title":"url  <code>property</code>","text":"<pre><code>url: str\n</code></pre> <p>Url to thumbnail.</p>"},{"location":"reference/meringue/thumbnail/images/#meringue.thumbnail.images.ThumbnailImage.is_supports_alpha","title":"is_supports_alpha  <code>property</code>","text":"<pre><code>is_supports_alpha: bool\n</code></pre> <p>Returns the alpha channel support flag.</p>"},{"location":"reference/meringue/thumbnail/images/#meringue.thumbnail.images.ThumbnailImage.mimetype","title":"mimetype  <code>property</code>","text":"<pre><code>mimetype: str\n</code></pre> <p>Return thumbnail mimetype.</p> <p>Python mimetypes library doesn't know webp =(.</p> <p>Returns:</p> <ul> <li> <code>str</code>           \u2013            <p>Thumbnail mimetype.</p> </li> </ul>"},{"location":"reference/meringue/thumbnail/images/#meringue.thumbnail.images.ThumbnailImage.saved","title":"saved  <code>property</code>","text":"<pre><code>saved: bool\n</code></pre> <p>Check saved on disk thumbnail or not.</p> <p>Returns:</p> <ul> <li> <code>bool</code>           \u2013            <p>Saved on disk flag.</p> </li> </ul>"},{"location":"reference/meringue/thumbnail/images/#meringue.thumbnail.images.ThumbnailImage.save","title":"save","text":"<pre><code>save(force=False, **kwargs)\n</code></pre> <p>Save image to disk.</p> <p>Attributes:</p> <ul> <li> <code>**kwargs</code>           \u2013            <p>Pillow imamge save params.</p> </li> </ul> Source code in <code>meringue/thumbnail/images.py</code> <pre><code>def save(self, force=False, **kwargs):\n    \"\"\"\n    Save image to disk.\n\n    Attributes:\n        **kwargs: Pillow imamge save params.\n    \"\"\"\n\n    if (not force) and self.saved:\n        return\n\n    image = self.image.copy()\n\n    if not self.is_supports_alpha:\n        image = image.convert(\"RGB\")\n\n    params = {\n        **m_settings.THUMBNAIL_SAVE_PARAMS_BY_FORMAT,\n        **kwargs,\n        \"format\": self.out_format,\n    }\n\n    tmp_image = BytesIO()\n    image.save(tmp_image, **params)\n    self.storage.save(self.name, tmp_image)\n    self._saved = True\n</code></pre>"},{"location":"reference/meringue/thumbnail/properties/","title":"properties.py","text":""},{"location":"reference/meringue/thumbnail/properties/#meringue.thumbnail.properties","title":"meringue.thumbnail.properties","text":""},{"location":"reference/meringue/thumbnail/shortcuts/","title":"shortcuts.py","text":""},{"location":"reference/meringue/thumbnail/shortcuts/#meringue.thumbnail.shortcuts","title":"meringue.thumbnail.shortcuts","text":""},{"location":"reference/meringue/thumbnail/shortcuts/#meringue.thumbnail.shortcuts.get_thumbnail","title":"get_thumbnail","text":"<pre><code>get_thumbnail(\n    file_path: Path,\n    job_chain: JobChainType,\n    out_format: str = THUMBNAIL_DEFAULT_FORMAT,\n    **kwargs\n) -&gt; str\n</code></pre> <p>Shortcut to make single image preview</p> <p>Attributes:</p> <ul> <li> <code>file_path</code>           \u2013            <p>Source file path.</p> </li> <li> <code>job_chain</code>           \u2013            <p>Thumbnail job chain.</p> </li> <li> <code>format</code>           \u2013            <p>Output image format.</p> </li> <li> <code>**kwargs</code>           \u2013            <p>Output image save extra params.</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>str</code>           \u2013            <p>Thumbnail url.</p> </li> </ul> Source code in <code>meringue/thumbnail/shortcuts.py</code> <pre><code>def get_thumbnail(\n    file_path: Path,\n    job_chain: JobChainType,\n    out_format: str = m_settings.THUMBNAIL_DEFAULT_FORMAT,\n    **kwargs,\n) -&gt; str:\n    \"\"\"\n    Shortcut to make single image preview\n\n    Attributes:\n        file_path: Source file path.\n        job_chain: Thumbnail job chain.\n        format: Output image format.\n        **kwargs: Output image save extra params.\n\n    Returns:\n        Thumbnail url.\n    \"\"\"\n\n    if not file_path.exists():\n        msg = f\"File `{file_path}` not found.\"\n        logger.error(msg)\n        return _dummyimage(job_chain)\n\n    thumbnailer = DefaultThumbnailer(file_path, job_chain=job_chain)\n    thumbnail_image = thumbnailer.get_thumbnail(out_format, **kwargs)\n    return thumbnail_image.url\n</code></pre>"},{"location":"reference/meringue/thumbnail/storage/","title":"storage.py","text":""},{"location":"reference/meringue/thumbnail/storage/#meringue.thumbnail.storage","title":"meringue.thumbnail.storage","text":""},{"location":"reference/meringue/thumbnail/storage/#meringue.thumbnail.storage.get_storage","title":"get_storage","text":"<pre><code>get_storage() -&gt; Storage\n</code></pre> <p>Finds the default storage class and returns its instance for use with thumbnails.</p> <p>Warning</p> <p>This method has not been tested with custom stores and complex parameter sets.</p> <p>Returns:</p> <ul> <li> <code>Storage</code>           \u2013            <p>Storage instance.</p> </li> </ul> Source code in <code>meringue/thumbnail/storage.py</code> <pre><code>def get_storage() -&gt; Storage:\n    \"\"\"\n    Finds the default storage class and returns its instance for use with thumbnails.\n\n    !!! warning\n        This method has not been tested with custom stores and complex parameter sets.\n\n    Returns:\n        Storage instance.\n    \"\"\"\n\n    if django.VERSION &lt; (4, 2):\n        DefaultStorage = settings.DEFAULT_FILE_STORAGE  # noqa: N806\n        storage = DefaultStorage(\n            location=m_settings.THUMBNAIL_DIR,\n            base_url=m_settings.THUMBNAIL_URL,\n        )\n    else:\n        from django.conf import DEFAULT_STORAGE_ALIAS\n        from django.core.files.storage import storages\n\n        params = storages.backends[DEFAULT_STORAGE_ALIAS]\n        params[\"location\"] = m_settings.THUMBNAIL_DIR\n        params[\"base_url\"] = m_settings.THUMBNAIL_URL\n        storage = storages.create_storage(params)\n\n    return storage\n</code></pre>"},{"location":"reference/meringue/thumbnail/types/","title":"types.py","text":""},{"location":"reference/meringue/thumbnail/types/#meringue.thumbnail.types","title":"meringue.thumbnail.types","text":""},{"location":"reference/meringue/thumbnail/types/#meringue.thumbnail.types.JobChainType","title":"JobChainType  <code>module-attribute</code>","text":"<pre><code>JobChainType = list[str]\n</code></pre> <p>Job chain Type</p>"},{"location":"reference/meringue/thumbnail/templatetags/__init__/","title":"__init__.py","text":""},{"location":"reference/meringue/thumbnail/templatetags/__init__/#meringue.thumbnail.templatetags","title":"meringue.thumbnail.templatetags","text":""},{"location":"reference/meringue/thumbnail/templatetags/m_thumbnails/","title":"m_thumbnails.py","text":""},{"location":"reference/meringue/thumbnail/templatetags/m_thumbnails/#meringue.thumbnail.templatetags.m_thumbnails","title":"meringue.thumbnail.templatetags.m_thumbnails","text":""},{"location":"reference/meringue/thumbnail/templatetags/m_thumbnails/#meringue.thumbnail.templatetags.m_thumbnails.thumbnail","title":"thumbnail","text":"<pre><code>thumbnail(filename, args='')\n</code></pre> <pre><code>\u0424\u0438\u043b\u044c\u0442\u0440 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439, \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u043a \u0430\u0434\u0440\u0435\u0441\u0443 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f (\u043f\u0443\u0442\u044c \u0434\u043e \u0444\u0430\u0439\u043b\u0430) \u0432 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430\u0445\n</code></pre> <p>\u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0440\u0430\u0437\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u0435 \u0437\u0430\u043f\u044f\u0442\u043e\u0439, \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0432\u0432\u0435\u0434\u0451\u043d\u043d\u044b\u0445 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440:     * \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c s:600x400,resize,s:400x400,crop - \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u0437\u0430\u0434\u0430\u0441 \u0446\u0435\u043b\u0435\u0432\u043e\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f 600x400, \u0434\u0430\u043b\u0435\u0435  \u0441\u043a\u0443\u043a\u043e\u0436\u0438\u0442 (\u0438\u043b\u0438 \u0440\u0430\u0441\u0442\u044f\u043d\u0435\u0442 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u0433\u043e \u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432) \u0434\u043e 600x400, \u043f\u043e\u0442\u043e\u043c \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442 \u043d\u043e\u0432\u044b\u0439 \u0446\u0435\u043b\u0435\u0432\u043e\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 400x400 \u0438 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u043c \u044d\u0442\u0430\u043f\u043e\u043c \u0431\u0443\u0434\u0435\u0442 \u043e\u0431\u0435\u0437\u0430\u043d\u0438\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0432 \u0440\u0430\u0437\u043c\u0435\u0440 400x400.     * \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c crop,s:400x400 \u043d\u0435 \u0434\u0430\u0441\u0442 \u043d\u0438\u043a\u0430\u043a\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u043d\u043e\u0432\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u043b\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u043a\u0440\u043e\u043f\u0430 (\u0435\u0441\u043b\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u043e\u043c\u0435\u043d\u044f\u0442\u044c \u043c\u0435\u0441\u0442\u0430\u043c\u0438, \u0442\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043e\u0431\u0440\u0435\u0436\u0435\u0442\u0441\u044f \u0434\u043e \u043a\u0432\u0430\u0434\u0440\u0430\u0442\u0430 400x400).</p> \u0410\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u044b \u0444\u0438\u043b\u044c\u0442\u0440\u0430 <p>s:x - \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0446\u0435\u043b\u0435\u0432\u043e\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0434\u043b\u044f     \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u0444\u0443\u043d\u043a\u0446\u0438\u0439 maxw: - \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0443\u044e \u0448\u0438\u0440\u0438\u043d\u0443 maxh: - \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0443\u044e \u0432\u044b\u0441\u043e\u0442\u0443 crop - \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u0445\u043e\u043b\u0441\u0442\u0430 \u0434\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u0433\u043e resize - \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0434\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u0433\u043e c: - \u0446\u0432\u0435\u0442 \u0437\u0430\u043b\u0438\u0432\u043a\u0438 \u0434\u043b\u044f \u043a\u0440\u043e\u043f\u0430 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 rgba     (c:255 255 255 255) cm:left|center|rigth top|bottom - \u0442\u043e\u0447\u043a\u0430 \u043e\u0442\u0441\u0447\u0451\u0442\u0430 \u0434\u043b\u044f \u043a\u0440\u043e\u043f\u0430 rm:cover|contain|stretch - \u043c\u0435\u0442\u043e\u0434 \u0440\u0435\u0441\u0430\u0439\u0437\u0430 \u0432\u043f\u0438\u0441\u0430\u0442\u044c \u0432 \u0440\u0430\u0437\u043c\u0435\u0440 \u0438\u043b\u0438     \u0440\u0430\u0441\u0442\u044f\u043d\u0443\u0442\u044c rs:no_increase|standart|no_reduce - \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f \u0440\u0435\u0441\u0430\u0439\u0437\u0430 - \u043d\u0435 \u0434\u0430\u0432\u0430\u0442\u044c \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0442\u044c \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u0435     \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0438\u043b\u0438 \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0442\u044c Source code in <code>meringue/thumbnail/templatetags/m_thumbnails.py</code> <pre><code>@register.filter\ndef thumbnail(filename, args=\"\"):\n    \"\"\"\n        \u0424\u0438\u043b\u044c\u0442\u0440 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439, \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u043a \u0430\u0434\u0440\u0435\u0441\u0443 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f (\u043f\u0443\u0442\u044c \u0434\u043e \u0444\u0430\u0439\u043b\u0430) \u0432 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430\u0445\n    \u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0440\u0430\u0437\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u0435 \u0437\u0430\u043f\u044f\u0442\u043e\u0439, \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439\n    \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0432\u0432\u0435\u0434\u0451\u043d\u043d\u044b\u0445 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u043e\u0432.\n    \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440:\n        * \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c s:600x400,resize,s:400x400,crop - \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u0437\u0430\u0434\u0430\u0441 \u0446\u0435\u043b\u0435\u0432\u043e\u0439 \u0440\u0430\u0437\u043c\u0435\u0440\n    \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f 600x400, \u0434\u0430\u043b\u0435\u0435  \u0441\u043a\u0443\u043a\u043e\u0436\u0438\u0442 (\u0438\u043b\u0438 \u0440\u0430\u0441\u0442\u044f\u043d\u0435\u0442 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u0433\u043e \u0438\n    \u0434\u0440\u0443\u0433\u0438\u0445 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432) \u0434\u043e 600x400, \u043f\u043e\u0442\u043e\u043c \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442 \u043d\u043e\u0432\u044b\u0439 \u0446\u0435\u043b\u0435\u0432\u043e\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 400x400 \u0438 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u043c \u044d\u0442\u0430\u043f\u043e\u043c\n    \u0431\u0443\u0434\u0435\u0442 \u043e\u0431\u0435\u0437\u0430\u043d\u0438\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0432 \u0440\u0430\u0437\u043c\u0435\u0440 400x400.\n        * \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c crop,s:400x400 \u043d\u0435 \u0434\u0430\u0441\u0442 \u043d\u0438\u043a\u0430\u043a\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u043d\u043e\u0432\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440\n    \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u043b\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u043a\u0440\u043e\u043f\u0430 (\u0435\u0441\u043b\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u043e\u043c\u0435\u043d\u044f\u0442\u044c \u043c\u0435\u0441\u0442\u0430\u043c\u0438, \u0442\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043e\u0431\u0440\u0435\u0436\u0435\u0442\u0441\u044f \u0434\u043e\n    \u043a\u0432\u0430\u0434\u0440\u0430\u0442\u0430 400x400).\n\n    \u0410\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u044b \u0444\u0438\u043b\u044c\u0442\u0440\u0430:\n        s:&lt;width&gt;x&lt;height&gt; - \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0446\u0435\u043b\u0435\u0432\u043e\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0434\u043b\u044f\n            \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u0444\u0443\u043d\u043a\u0446\u0438\u0439\n        maxw:&lt;width&gt; - \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0443\u044e \u0448\u0438\u0440\u0438\u043d\u0443\n        maxh:&lt;height&gt; - \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0443\u044e \u0432\u044b\u0441\u043e\u0442\u0443\n        crop - \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u0445\u043e\u043b\u0441\u0442\u0430 \u0434\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u0433\u043e\n        resize - \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0434\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u0433\u043e\n        c:&lt;color&gt; - \u0446\u0432\u0435\u0442 \u0437\u0430\u043b\u0438\u0432\u043a\u0438 \u0434\u043b\u044f \u043a\u0440\u043e\u043f\u0430 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 rgba\n            (c:255 255 255 255)\n        cm:left|center|rigth top|bottom - \u0442\u043e\u0447\u043a\u0430 \u043e\u0442\u0441\u0447\u0451\u0442\u0430 \u0434\u043b\u044f \u043a\u0440\u043e\u043f\u0430\n        rm:cover|contain|stretch - \u043c\u0435\u0442\u043e\u0434 \u0440\u0435\u0441\u0430\u0439\u0437\u0430 \u0432\u043f\u0438\u0441\u0430\u0442\u044c \u0432 \u0440\u0430\u0437\u043c\u0435\u0440 \u0438\u043b\u0438\n            \u0440\u0430\u0441\u0442\u044f\u043d\u0443\u0442\u044c\n        rs:no_increase|standart|no_reduce - \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f \u0440\u0435\u0441\u0430\u0439\u0437\u0430 - \u043d\u0435 \u0434\u0430\u0432\u0430\u0442\u044c \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0442\u044c \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u0435\n            \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0438\u043b\u0438 \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0442\u044c\n    \"\"\"\n\n    task_list = args.split(\",\")\n    return get_thumbnail(filename=filename, task_list=task_list)\n</code></pre>"},{"location":"usage/","title":"Getting Started","text":""},{"location":"usage/#installation","title":"Installation","text":"<pre><code>$ pip install meringue\n</code></pre> <p>You can connect individual modules as needed (read more in the documentation of the corresponding module):</p> <pre><code>INSTALLED_APPS = (\n    ...\n    'meringue.core',\n    'meringue.api',\n    ...\n)\n</code></pre> <p>All settings for the library are specified inside the <code>MERINGUE</code> parameter (for more details, see the corresponding section):</p> <pre><code>MERINGUE = {\n    ...\n}\n</code></pre>"},{"location":"usage/api/","title":"Meringue Api","text":"<p>This is an application with a set of various utilities for the API and in particular for the Django Rest Framework.</p>"},{"location":"usage/api/#routers","title":"routers","text":""},{"location":"usage/api/#meringuerouter","title":"MeringueRouter","text":"<p>It's a django rest framework router, with some additional specific functionality.</p>"},{"location":"usage/api/#root-view","title":"Root view","text":"<p>The router enables and disables the root view according to the API_ENABLE_ROOT_VIEW setting. By default, the parameter corresponds to the value of the DEBUG parameter and in production the root view is disabled.</p>"},{"location":"usage/api/#object-predefined-detail-route","title":"Object predefined detail route","text":"<p>The router allows you to add ViewSet for predefined objects - that is, a ViewSet object for which it is known in advance, the simplest example is a profile. To manage a profile, it is often necessary to have a set of views - getting a profile, editing, deleting. The default behavior of DRF will either require you to use an id to request a profile, or make several separate views for this, this router allows you to use ViewSet for this. To implement such a ViewSet, you need to make a standard ViewSet and specify the flag <code>m_object_detail = True</code>.</p> <p>For example, ViewSet for a profile in general will look like this:</p> <pre><code>class ProfileViewSet(\n    mixins.RetrieveModelMixin,\n    mixins.DestroyModelMixin,\n    GenericViewSet,\n):\n    permission_classes = (ProfilePermission, )\n    queryset = User.objects.all()\n    serializer_class = ProfileSerializer\n    object_detail = True\n\n    def get_object(self):\n        user = self.request.user\n        self.check_object_permissions(self.request, user)\n        return user\n\n    def perform_destroy(self, instance):\n        self.request.user = AnonymousUser()\n        super().perform_destroy(instance)\n</code></pre> <p>Of course, for such a router, it will not work to use <code>ListModelMixin</code>.</p> <p>The router itself in use is exactly the same as a regular one:</p> <pre><code>from meringue.api.routers import MeringueRouter\n\nrouter = MeringueRouter()\nrouter.register('profile', ProfileViewSet, basename=\"profile\")\n\nurlpatterns = [\n    path('', include(router.urls)),\n]\n</code></pre>"},{"location":"usage/api/#handlers","title":"handlers","text":""},{"location":"usage/api/#exception_handler","title":"exception_handler","text":"<p>Error handler for django rest framework.</p> <p>The API error handler returns errors in the format of \"code-message\" pairs. This format is particularly useful for multilingual websites, as it allows the frontend to handle specific errors more effectively. By utilizing the error code, you can adjust the user interface behavior accordingly\u2014for example, displaying a pop-up window with detailed information about the cause of the error in certain situations.</p> <p>\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a \u043e\u0448\u0438\u0431\u043e\u043a API \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043e\u0448\u0438\u0431\u043a\u0438 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 \u043f\u0430\u0440 \u00ab\u043a\u043e\u0434-\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435\u00bb. \u042d\u0442\u043e\u0442 \u0444\u043e\u0440\u043c\u0430\u0442 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e \u043f\u043e\u043b\u0435\u0437\u0435\u043d \u0434\u043b\u044f \u043c\u043d\u043e\u0433\u043e\u044f\u0437\u044b\u0447\u043d\u044b\u0445 \u0441\u0430\u0439\u0442\u043e\u0432, \u0442\u0430\u043a \u043a\u0430\u043a \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0444\u0440\u043e\u043d\u0442\u0435\u043d\u0434\u0443 \u0431\u043e\u043b\u0435\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0435 \u043e\u0448\u0438\u0431\u043a\u0438. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u043a\u043e\u0434 \u043e\u0448\u0438\u0431\u043a\u0438, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u044f\u0442\u044c \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u2014 \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c \u0432\u0441\u043f\u043b\u044b\u0432\u0430\u044e\u0449\u0435\u0435 \u043e\u043a\u043d\u043e \u0441 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0435\u0439 \u043e \u043f\u0440\u0438\u0447\u0438\u043d\u0435 \u043e\u0448\u0438\u0431\u043a\u0438.</p> settings.py<pre><code>REST_FRAMEWORK = {\n    \"EXCEPTION_HANDLER\": \"meringue.api.handlers.exception_handler\",\n}\n</code></pre> <pre><code>&gt;&gt;&gt; from rest_framework import serializers\n&gt;&gt;&gt; from django.contrib.auth.models import User\n\n&gt;&gt;&gt; class UserSerializer(serializers.ModelSerializer):\n&gt;&gt;&gt;     class Meta:\n&gt;&gt;&gt;         model = User\n&gt;&gt;&gt;         fields = [\"username\",]\n\n&gt;&gt;&gt; serializer = UserSerializer(data={})\n&gt;&gt;&gt; serializer.is_valid()\n&gt;&gt;&gt; print(serializer.errors)\n{'username': [ErrorDetail(string='Required field.', code='required')]}\n</code></pre>"},{"location":"usage/api/#docs","title":"docs","text":"<p>When generating API documentation using drf-spectacular, it is possible to intervene in the resulting object in a limited and inconvenient way:</p> <ul> <li>Firstly, it is proposed to do all this in the settings, which no longer implies a large amount of data (or it will be terribly inconvenient);</li> <li>Secondly, it is difficult to do some manipulations \"on the fly\" (for example, depending on the environment, you may have a different set of authorization methods, or something else);</li> <li>Thirdly, if you have several apexes and, accordingly, documentation, you will not be able to do, for example, a different description for different apexes / documentation.</li> </ul> <p>To solve all these problems, we implemented a patcher and a view to load it.</p>"},{"location":"usage/api/#openapischemapatcher","title":"OpenAPISchemaPatcher","text":"<p>This is an OpenAPI3 schema patcher that makes it relatively easy to add data to the schema. Everything is quite simple and without much logic, just additional data is first registered, then the scheme is supplemented with them.</p> <p>To register additional objects, there is the following set of methods:</p>"},{"location":"usage/api/#register_security_scheme","title":"register_security_scheme","text":"<p>Register security scheme.</p> <p>Attributes:</p> <ul> <li> <code>name</code>           \u2013            <p>Security scheme name.</p> </li> <li> <code>scheme</code>           \u2013            <p>Security scheme in Security Scheme Object or Reference Object format.</p> </li> </ul> <p>Example:</p> <pre><code>from meringue.api.docs import OpenAPISchemaPatcher\npatcher = OpenAPISchemaPatcher()\npatcher.register_security_scheme(\"name\", { ... })\n</code></pre>"},{"location":"usage/api/#register_component_scheme","title":"register_component_scheme","text":"<p>Register components scheme.</p> <p>Attributes:</p> <ul> <li> <code>name</code>           \u2013            <p>Component name.</p> </li> <li> <code>schema</code>           \u2013            <p>Formatted Component schema object.</p> </li> </ul> <p>Example:</p> <pre><code>from meringue.api.docs import OpenAPISchemaPatcher\npatcher = OpenAPISchemaPatcher()\npatcher.register_component_scheme(\"name\", { ... })\n</code></pre>"},{"location":"usage/api/#register_tag","title":"register_tag","text":"<p>Register tag.</p> <p>Attributes:</p> <ul> <li> <code>scheme</code>           \u2013            <p>Tag scheme object.</p> </li> </ul> <p>Example:</p> <pre><code>from meringue.api.docs import OpenAPISchemaPatcher\npatcher = OpenAPISchemaPatcher()\npatcher.register_tag({\n   \"name\": \"meringue\",\n   \"x-displayName\": \"Meringue\",\n})\n</code></pre>"},{"location":"usage/api/#patch_description","title":"patch_description","text":"<p>Adds a list of servers from the openapi schema source servers to the description.</p> <p>This method adds to the end of the description a list of servers that it takes from the corresponding section of the openapi schema.</p> <p>Attributes:</p> <ul> <li> <code>openapi_schema</code>           \u2013            <p>OpenAPI Object.</p> </li> </ul> <p>Example:</p> <pre><code>&gt;&gt;&gt; from meringue.api.docs import OpenAPISchemaPatcher\n&gt;&gt;&gt; patcher = OpenAPISchemaPatcher()\n&gt;&gt;&gt; schema = {\n...     \"servers\": [\n...         {\n...             \"description\": \"Server 1\",\n...             \"url\": \"https://example-1.com\",\n...         },\n...         {\n...             \"description\": \"Server 2\",\n...             \"url\": \"example-2.com\",\n...         },\n...     ],\n...     \"info\": {\n...         \"description\": \"Test API\",\n...     },\n... }\n&gt;&gt;&gt; patcher.patch_description(schema)\n&gt;&gt;&gt; print(schema)\n{\n    \"servers\": [\n        {\n            \"description\": \"Server 1\",\n            \"url\": \"https://example-1.com\",\n        },\n        {\n            \"description\": \"Server 2\",\n            \"url\": \"example-2.com\",\n        },\n    ],\n    \"info\": {\n        \"description\": \"Test API\\n\\nServer 1 API [example-1.com](https://example-1.com)\\n\\nServer 2 API [example-2.com](example-2.com)\",\n    },\n}\n</code></pre>"},{"location":"usage/api/#patch_security_schemes","title":"patch_security_schemes","text":"<p>Adds registered security schemes to the openapi schema.</p> <p>Attributes:</p> <ul> <li> <code>openapi_schema</code>           \u2013            <p>OpenAPI Object.</p> </li> </ul> <p>Example:</p> <pre><code>&gt;&gt;&gt; from meringue.api.docs import OpenAPISchemaPatcher\n&gt;&gt;&gt; patcher = OpenAPISchemaPatcher()\n&gt;&gt;&gt; patcher.register_security_scheme(\"name\", { ... })\n&gt;&gt;&gt; schema = {}\n&gt;&gt;&gt; patcher.patch_security_schemes(schema)\n&gt;&gt;&gt; print(schema)\n{\n    \"components\": {\n        \"securitySchemes\": {\n            \"name\": { ... },\n        },\n    },\n}\n</code></pre>"},{"location":"usage/api/#patch_component_schemes","title":"patch_component_schemes","text":"<p>Adds registered components schemas to the openapi schema.</p> <p>Attributes:</p> <ul> <li> <code>openapi_schema</code>           \u2013            <p>OpenAPI Object.</p> </li> </ul> <p>Example:</p> <pre><code>&gt;&gt;&gt; from meringue.api.docs import OpenAPISchemaPatcher\n&gt;&gt;&gt; patcher = OpenAPISchemaPatcher()\n&gt;&gt;&gt; patcher.register_component_scheme(\"name\", { ... })\n&gt;&gt;&gt; schema = {}\n&gt;&gt;&gt; patcher.patch_component_schemes(schema)\n&gt;&gt;&gt; print(schema)\n{\n    \"components\": {\n        \"schemas\": {\n            \"name\": { ... },\n        },\n    },\n}\n</code></pre>"},{"location":"usage/api/#patch_tags","title":"patch_tags","text":"<p>Adds registered components schemas to the openapi schema.</p> <p>Attributes:</p> <ul> <li> <code>openapi_schema</code>           \u2013            <p>OpenAPI Object.</p> </li> </ul> <p>Example:</p> <pre><code>&gt;&gt;&gt; from meringue.api.docs import OpenAPISchemaPatcher\n&gt;&gt;&gt; schema = {\n...     \"servers\": [\n...         {\n...             \"description\": \"Server 1\",\n...             \"url\": \"https://example-1.com\",\n...         },\n...         {\n...             \"description\": \"Server 2\",\n...             \"url\": \"example-2.com\",\n...         },\n...     ],\n... }\n&gt;&gt;&gt; patcher = OpenAPISchemaPatcher()\n&gt;&gt;&gt; patcher.register_tag({\n...    \"name\": \"meringue\",\n...    \"x-displayName\": \"Meringue\",\n... })\n&gt;&gt;&gt; patcher.patch_tags(schema)\n&gt;&gt;&gt; print(schema)\n{\n    \"servers\": [\n        {\n            \"description\": \"Server 1\",\n            \"url\": \"https://example-1.com\",\n        },\n        {\n            \"description\": \"Server 2\",\n            \"url\": \"example-2.com\",\n        },\n    ],\n    \"tags\": [\n            {\n            \"name\": \"meringue\",\n            \"x-displayName\": \"Meringue\",\n        },\n    ],\n}\n</code></pre>"},{"location":"usage/api/#patch_schema","title":"patch_schema","text":"<p>Fully patch the schema.</p>"},{"location":"usage/api/#meringuespectacularapiview","title":"MeringueSpectacularAPIView","text":"<p>This view is a wrapper around the original SpectacularAPIView, but with the addition of a method that patches the OpenAPI schema.</p> urls.py<pre><code>from django.urls import path\n\nfrom meringue.api.docs import OpenAPISchemaPatcher\nfrom meringue.api.docs import MeringueSpectacularAPIView\n\n\npatcher = OpenAPISchemaPatcher()\npatcher.register_tag({\n   \"name\": \"meringue\",\n   \"x-displayName\": \"Meringue\",\n})\n\nurlpatterns = [\n    path(\"schema\", MeringueSpectacularAPIView.as_view(patcher=patcher), name=\"schema\"),\n]\n</code></pre>"},{"location":"usage/conf/","title":"Configurations","text":"<p>All settings for Meringue are set inside the <code>MERINGUE</code> parameter of the django settings, and in the project settings it looks something like this:</p> settings.py<pre><code>MERINGUE = {\n    'UPLOAD_RENAME_HANDLER': 'my_project.upload_handlers.rename_handler',\n}\n</code></pre> <p>Library settings can be accessed as follows:</p> <pre><code>&gt;&gt;&gt; from meringue.conf import m_settings\n&gt;&gt;&gt; print(m_settings.UPLOAD_RENAME_HANDLER)\n&lt;function rename_handler at 0x7f5772d5ec00&gt;\n</code></pre> <p>A complete and up-to-date list of parameters can be found here.</p>"},{"location":"usage/core/","title":"Meringue core","text":"<p>This is a basic package that contains a variety of general purpose functionality such as abstract models, various handlers, utilities, and more.</p>"},{"location":"usage/core/#mixins","title":"Mixins","text":""},{"location":"usage/core/#cmtimemixin","title":"CMTimeMixin","text":"<p>A primitive abstract model that adds the ctime and mtime fields to your model.</p>"},{"location":"usage/core/#sortingmixin","title":"SortingMixin","text":"<p>An abstract model that adds a sortable field, as well as a manager with sorting correction functionality.</p>"},{"location":"usage/core/#correction_sorting","title":"correction_sorting","text":"<p>This is a method to update/fix the sorting of the selected list of items.</p> <p>The sorting will be done according to the <code>queryset</code> sorting, so sorting can be controlled by executing <code>.order_by()</code> before calling the <code>correction_sorting</code> method.</p> <p>The selection for updating sorting can be pre-limited by filtering the list.</p>"},{"location":"usage/core/#publicationmixin","title":"PublicationMixin","text":"<p>Mixin with the functionality of manual publishing.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; FooModel.object.published()\n&gt;&gt;&gt; FooModel.object.unpublished()\n</code></pre>"},{"location":"usage/core/#published","title":"published","text":"<p>Method to getting published items.</p>"},{"location":"usage/core/#unpublished","title":"unpublished","text":"<p>Method for getting unpublished items.</p>"},{"location":"usage/core/#publicationdatesmixin","title":"PublicationDatesMixin","text":"<p>Mixin with the functionality of publishing in a certain period.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; FooModel.object.published()\n&gt;&gt;&gt; FooModel.object.unpublished()\n</code></pre>"},{"location":"usage/core/#published_1","title":"published","text":"<p>Method to getting published items.</p>"},{"location":"usage/core/#unpublished_1","title":"unpublished","text":"<p>Method for getting unpublished items.</p>"},{"location":"usage/core/#utils","title":"Utils","text":""},{"location":"usage/core/#datetime","title":"datetime","text":""},{"location":"usage/core/#format_date_from_to","title":"format_date_from_to","text":"<p>Method to display date period.</p> <p>Possible output formats depending on the input data:</p> <ul> <li><code>DD.MM.YYYY - DD.MM.YYYY</code></li> <li><code>DD.MM - DD.MM.YYYY</code></li> <li><code>DD - DD.MM.YYYY</code></li> <li><code>DD.MM.YYYY</code></li> </ul> <p>Examples:</p> <pre><code>&gt;&gt;&gt; print(format_date_from_to(dt.date(2020, 1, 1), dt.date(2020, 2, 1)))\n01.01 - 01.02.2020\n</code></pre> <p>Attributes:</p> <ul> <li> <code>date_start</code>           \u2013            <p>Period start date.</p> </li> <li> <code>date_end</code>           \u2013            <p>Period end date.</p> </li> <li> <code>delimiter</code>           \u2013            <p>Dates delimiter.</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>str</code>           \u2013            <p>Date period string.</p> </li> </ul>"},{"location":"usage/core/#crypt","title":"crypt","text":"<p>This module contains two extremely simplified functions for encrypting and decrypting a message using the AES algorithm and the GCM method. The main task that these functions are designed to solve is to encrypt small amounts of data for situations such as password recovery links and the like.</p> <p>Note</p> <p>These functions are just a wrapper for encryption methods from the pycryptodome library (you also need to install it).</p>"},{"location":"usage/core/#encrypt_message","title":"encrypt_message","text":"<p>Method for encrypting a message with AES algorithm and the GCM method.</p>"},{"location":"usage/core/#decrypt_message","title":"decrypt_message","text":"<p>Method for decrypting a message encrypted with AES algorithm and the GCM method.</p> <p>Methods for encryption use a key that can be set in the CRYPTO_KEY parameter. By default, the parameter uses the first 32 characters of SECRET_KEY.</p>"},{"location":"usage/core/#frontend","title":"frontend","text":""},{"location":"usage/core/#get_link","title":"get_link","text":"<p>get_link is a method for getting a link to a resource.</p> <p>Modern sites mainly work according to the scheme when the backend provides an api to which the front sends requests, in this regard, reverse, which provides django, cannot give actual links to the resource, but links are still needed in the backend (for example, in letters and sms sent to the user or in admin panel for managers). As a result, this small utility was implemented that will help you get a link to the desired resource.</p> <p>To use the utility, you must specify a list of links in the FRONTEND_URLS parameter, and also, if you plan to receive absolute links, the frontend domain in the FRONTEND_DOMAIN parameter:</p> settings.py<pre><code>MERINGUE = {\n    \"FRONTEND_URLS\": {\n        \"index\": \"/\"\n        \"user\": \"/user/{id}\"\n    },\n    \"FRONTEND_DOMAIN\": \"https://example.com\",\n}\n</code></pre> <p>You can get links in code like this:</p> <pre><code>&gt;&gt;&gt; from meringue.core.utils.frontend import get_link\n&gt;&gt;&gt; get_link(\"index\")\nhttps://example.com/\n\n&gt;&gt;&gt; get_link(\"user\", id=123)\nhttps://example.com/user/123\n</code></pre>"},{"location":"usage/core/#templatetags","title":"Templatetags","text":""},{"location":"usage/core/#cop_year","title":"cop_year","text":"<p>A tag that displays the year or range of years for the copyright string in <code>YYYY-YYYY</code> format.</p> <p>Examples:</p> <pre><code>&lt;p&gt;Copyright \u00a9 {% cop_year %} My company&lt;/p&gt;\n</code></pre> <p>Raises:</p> <ul> <li> <code>Exception</code>             \u2013            <p>To use the <code>cop_year</code> tag, you must fill in the <code>COP_YEAR</code> parameter in the meringue settings</p> </li> </ul> <p>Returns:</p> <ul> <li> <code>str</code>           \u2013            <p>Year for copyrights.</p> </li> </ul> <p>For the tag to work, you must fill in the COP_YEAR parameter in the settings.</p> <p>Also, in the COP_YEARS_DIFF parameter, you can specify the minimum difference in years when the period in copyrights will be displayed, and not the current year.</p>"},{"location":"usage/core/#date_range","title":"date_range","text":"<p>Return range of date in one of the following formats:</p> <ul> <li><code>DD.MM.YYYY - DD.MM.YYYY</code></li> <li><code>DD.MM - DD.MM.YYYY</code></li> <li><code>DD - DD.MM.YYYY</code></li> <li><code>DD.MM.YYYY</code></li> </ul> <p>Attributes:</p> <ul> <li> <code>date_start</code>           \u2013            <p>Period start date.</p> </li> <li> <code>date_end</code>           \u2013            <p>Period end date.</p> </li> </ul> <p>Examples:</p> <pre><code>{% date_range date_start date_end %}\n</code></pre> <p>Returns:</p> <ul> <li> <code>str</code>           \u2013            <p>Date period.</p> </li> </ul>"},{"location":"usage/core/#translations","title":"Translations","text":"<p>If you use djano-modeltranslation, then when connecting <code>meringue.core</code>, you can register fields for translations by setting the list of fields in the <code>m_translate_fields</code> field in the meta of the corresponding model:</p> <pre><code>class FooModel(models.Model):\n    name = models.CharField(max_length=32)\n\n    class Meta:\n        m_translate_fields = [\"name\", ]\n</code></pre>"},{"location":"usage/core/#upload-handlers","title":"Upload handlers","text":"<p>The standard django load handlers leave the original file name where possible. However, often when uploading a file to the server, the file can be called somehow ugly (and sometimes indecent), in order to avoid this problem, the following two upload handlers are implemented - MemoryFileUploadHandler and TemporaryFileUploadHandler. These two loaders replace the corresponding django loaders but in the process they rename the file being loaded.</p> <p>The renaming process can be overridden by specifying your own renaming method in the UPLOAD_RENAME_HANDLER parameter.</p> <p>To use them, specify them in the FILE_UPLOAD_HANDLERS parameter:</p> <pre><code>FILE_UPLOAD_HANDLERS = [\n    \"meringue.core.upload_handlers.TemporaryFileUploadHandler\",\n    \"meringue.core.upload_handlers.MemoryFileUploadHandler\",\n]\n</code></pre>"},{"location":"usage/core/#views","title":"Views","text":""},{"location":"usage/core/#im_a_teapot","title":"im_a_teapot","text":"<p>We all at some point want to brew boiling water.</p> <p>Examples:</p> urls.py<pre><code>from django.urls import path\nfrom meringue.core.views import im_a_teapot\n\nurlpatterns = [\n    path('make_coffee', im_a_teapot, name=\"make_coffee\"),\n]\n</code></pre>"},{"location":"usage/protected/","title":"Meringue Protected","text":"<p>This package includes functionality for organizing private files.</p> <p>The main functionality is encapsulated in x_accel_redirect_view. It checks whether the user has access to view the file and serves it.</p> <p>However, when working with nginx, you can enable the PROTECTED_SERVE_WITH_NGINX option. In this case, nginx itself will serve the file instead of Django, using the internal directive.</p>"},{"location":"usage/protected/#usage","title":"Usage","text":"<p>In the simplest scenario, you just need to enable view, and everything will work:</p> <pre><code>urlpatterns = [\n    ...\n    path(\n        \"protected/&lt;int:cid&gt;/&lt;slug:field&gt;/&lt;slug:pk&gt;\",\n        staff_member_required(x_accel_redirect_view),\n        name=\"meringue-protected-file\",\n    ),\n    ...\n]\n</code></pre>"},{"location":"usage/protected/#nginx","title":"Nginx","text":"<p>Of course, when using nginx, files in the media folder need to be protected from access:</p> <pre><code>server {\n    ...\n    location /media/protected/ {\n        return 404;\n    }\n    ...\n}\n</code></pre> <p>However, for production, you can configure nginx to serve files instead of Django. To do this, you need to enable the PROTECTED_SERVE_WITH_NGINX option and configure nginx as follows:</p> <pre><code>server {\n    ...\n    location /media/protected/ {\n        internal;\n        alias /home/user/public/media/protected/;\n    }\n    ...\n}\n</code></pre>"},{"location":"usage/protected/#protectedfilefield-and-protectedimagefield","title":"ProtectedFileField and ProtectedImageField","text":"<p>To generate protected files, there are two fields available for the model - ProtectedFileField and ProtectedImageField.</p> <pre><code>class Foo(models.Model):\n    file = ProtectedFileField(\n        view_name=\"x_accel_redirect_view\",\n        host_name=\"sub\",\n        disposition=\"inline\",\n        nginx_location_getter=_test_getter,\n    )\n</code></pre> <ul> <li>view_name - the name of the route handling the file request (mandatory field);</li> <li>host_name - the host name for reversing to the view, when used in combination with django-hosts;</li> <li>disposition - disposition for the <code>Content-Disposition</code> header;</li> <li>nginx_location_getter - a method that returns the link through which the file will be served by nginx after redirection from the view. The default method is set in the parameter PROTECTED_NGINX_LOCATION_GETTER. The default method nginx_location_getter returns the original link to the file.</li> </ul> <p>The original properties of the <code>url</code> fields have been changed to point to the view specified in the <code>view_name</code> attribute.</p> <p>By default, the field saves the file in the <code>protected</code> directory.</p>"}]}